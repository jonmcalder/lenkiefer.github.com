geom_line(aes(y=hpi.100/percapita.100),color=viridis(10)[6])+
geom_text(color=viridis(10)[4])+
#geom_line(aes(y=hpi.100/100),color=viridis(10)[5])+
geom_text(aes(y=hpi.100/noshelter.100,label="Real Price"),color=viridis(10)[2])+
geom_text(aes(y=hpi.100/percapita.100),color=viridis(10)[6])+
theme_minimal()+theme(plot.caption=element_text(hjust=0,size=11))+
labs(subtitle="Index: Jan, 1991=1",y="",x="",caption= mycaption,title="House price ratios")
ggplot(data=mydata,aes(x=date,y=hpi.100/rent.100))+
geom_line(color=viridis(10)[4])+
#geom_line(aes(y=hpi.100/100),color=viridis(10)[5])+
geom_line(aes(y=hpi.100/noshelter.100),color=viridis(10)[2])+
geom_line(aes(y=hpi.100/percapita.100),color=viridis(10)[6])+
geom_text(color=viridis(10)[4])+
#geom_line(aes(y=hpi.100/100),color=viridis(10)[5])+
geom_text(aes(y=hpi.100/noshelter.100),label="Real Price",color=viridis(10)[2])+
geom_text(aes(y=hpi.100/percapita.100),color=viridis(10)[6])+
theme_minimal()+theme(plot.caption=element_text(hjust=0,size=11))+
labs(subtitle="Index: Jan, 1991=1",y="",x="",caption= mycaption,title="House price ratios")
dlist[i]
dlist
ggplot(data=mydata,aes(x=date,y=hpi.100/rent.100))+
geom_line(color=viridis(10)[4])+
#geom_line(aes(y=hpi.100/100),color=viridis(10)[5])+
geom_line(aes(y=hpi.100/noshelter.100),color=viridis(10)[2])+
geom_line(aes(y=hpi.100/percapita.100),color=viridis(10)[6])+
geom_text(color=viridis(10)[4])+
#geom_line(aes(y=hpi.100/100),color=viridis(10)[5])+
annotate(x=dlist[i],y=mydata[date==d.list[i],]$hpi.100/mydata[date==d.list[i],]$noshelter.100),label="Real Price",color=viridis(10)[2])+
geom_text(aes(y=hpi.100/percapita.100),color=viridis(10)[6])+
theme_minimal()+theme(plot.caption=element_text(hjust=0,size=11))+
labs(subtitle="Index: Jan, 1991=1",y="",x="",caption= mycaption,title="House price ratios")
mydata[date==d.list[i],]$hpi.100/mydata[date==d.list[i],]$noshelter.100
i
dlist[i]
d.list[i]
mydata[date==d.list[i],]$noshelter.100
mydata[date==d.list[i]]
mydata<-data.table(mydata)
ggplot(data=mydata,aes(x=date,y=hpi.100/rent.100))+
geom_line(color=viridis(10)[4])+
#geom_line(aes(y=hpi.100/100),color=viridis(10)[5])+
geom_line(aes(y=hpi.100/noshelter.100),color=viridis(10)[2])+
geom_line(aes(y=hpi.100/percapita.100),color=viridis(10)[6])+
geom_text(color=viridis(10)[4])+
#geom_line(aes(y=hpi.100/100),color=viridis(10)[5])+
annotate(x=dlist[i],y=mydata[date==d.list[i],]$hpi.100/mydata[date==d.list[i],]$noshelter.100,label="Real Price",color=viridis(10)[2])+
geom_text(aes(y=hpi.100/percapita.100),color=viridis(10)[6])+
theme_minimal()+theme(plot.caption=element_text(hjust=0,size=11))+
labs(subtitle="Index: Jan, 1991=1",y="",x="",caption= mycaption,title="House price ratios")
mydata<-data.table(mydata)
ggplot(data=mydata,aes(x=date,y=hpi.100/rent.100))+
geom_line(color=viridis(10)[4])+
#geom_line(aes(y=hpi.100/100),color=viridis(10)[5])+
geom_line(aes(y=hpi.100/noshelter.100),color=viridis(10)[2])+
geom_line(aes(y=hpi.100/percapita.100),color=viridis(10)[6])+
geom_text(color=viridis(10)[4])+
#geom_line(aes(y=hpi.100/100),color=viridis(10)[5])+
annotate(x=d.list[i],y=mydata[date==d.list[i],]$hpi.100/mydata[date==d.list[i],]$noshelter.100,label="Real Price",color=viridis(10)[2])+
geom_text(aes(y=hpi.100/percapita.100),color=viridis(10)[6])+
theme_minimal()+theme(plot.caption=element_text(hjust=0,size=11))+
labs(subtitle="Index: Jan, 1991=1",y="",x="",caption= mycaption,title="House price ratios")
ggplot(data=mydata,aes(x=date,y=hpi.100/rent.100))+
geom_line(color=viridis(10)[4])+
#geom_line(aes(y=hpi.100/100),color=viridis(10)[5])+
geom_line(aes(y=hpi.100/noshelter.100),color=viridis(10)[2])+
geom_line(aes(y=hpi.100/percapita.100),color=viridis(10)[6])+
geom_text(color=viridis(10)[4])+
#geom_line(aes(y=hpi.100/100),color=viridis(10)[5])+
annotate("text",x=d.list[i],y=mydata[date==d.list[i],]$hpi.100/mydata[date==d.list[i],]$noshelter.100,label="Real Price",color=viridis(10)[2])+
geom_text(aes(y=hpi.100/percapita.100),color=viridis(10)[6])+
theme_minimal()+theme(plot.caption=element_text(hjust=0,size=11))+
labs(subtitle="Index: Jan, 1991=1",y="",x="",caption= mycaption,title="House price ratios")
ggplot(data=mydata,aes(x=date,y=hpi.100/rent.100))+
geom_line(color=viridis(10)[4])+
#geom_line(aes(y=hpi.100/100),color=viridis(10)[5])+
geom_line(aes(y=hpi.100/noshelter.100),color=viridis(10)[2])+
geom_line(aes(y=hpi.100/percapita.100),color=viridis(10)[6])+
# geom_text(color=viridis(10)[4])+
#geom_line(aes(y=hpi.100/100),color=viridis(10)[5])+
annotate("text",x=d.list[i],y=mydata[date==d.list[i],]$hpi.100/mydata[date==d.list[i],]$noshelter.100,label="Real Price",color=viridis(10)[2])+
# geom_text(aes(y=hpi.100/percapita.100),color=viridis(10)[6])+
theme_minimal()+theme(plot.caption=element_text(hjust=0,size=11))+
labs(subtitle="Index: Jan, 1991=1",y="",x="",caption= mycaption,title="House price ratios")
ggplot(data=mydata,aes(x=date,y=hpi.100/rent.100))+
geom_line(color=viridis(10)[4])+
#geom_line(aes(y=hpi.100/100),color=viridis(10)[5])+
geom_line(aes(y=hpi.100/noshelter.100),color=viridis(10)[2])+
geom_line(aes(y=hpi.100/percapita.100),color=viridis(10)[6])+
# geom_text(color=viridis(10)[4])+
#geom_line(aes(y=hpi.100/100),color=viridis(10)[5])+
annotate("text",x=d.list[i],y=mydata[date==d.list[i],]$hpi.100/mydata[date==d.list[i],]$rent.100,label="Price to Rent",color=viridis(10)[2])+
annotate("text",x=d.list[i],y=mydata[date==d.list[i],]$hpi.100/mydata[date==d.list[i],]$noshelter.100,label="Real Price",color=viridis(10)[2])+
annotate("text",x=d.list[i],y=mydata[date==d.list[i],]$hpi.100/mydata[date==d.list[i],]$percapita.100,label="Price to Income",color=viridis(10)[6])+
# geom_text(aes(y=hpi.100/percapita.100),color=viridis(10)[6])+
theme_minimal()+theme(plot.caption=element_text(hjust=0,size=11))+
labs(subtitle="Index: Jan, 1991=1",y="",x="",caption= mycaption,title="House price ratios")
ggplot(data=mydata,aes(x=date,y=hpi.100/rent.100))+
geom_line(color=viridis(10)[4])+
#geom_line(aes(y=hpi.100/100),color=viridis(10)[5])+
geom_line(aes(y=hpi.100/noshelter.100),color=viridis(10)[2])+
geom_line(aes(y=hpi.100/percapita.100),color=viridis(10)[6])+
# geom_text(color=viridis(10)[4])+
#geom_line(aes(y=hpi.100/100),color=viridis(10)[5])+
annotate("text",x=d.list[i],y=mydata[date==d.list[i],]$hpi.100/mydata[date==d.list[i],]$rent.100,label="Price\nto\nRent",color=viridis(10)[2])+
annotate("text",x=d.list[i],y=mydata[date==d.list[i],]$hpi.100/mydata[date==d.list[i],]$noshelter.100,label="Real\nPrice",color=viridis(10)[2])+
annotate("text",x=d.list[i],y=mydata[date==d.list[i],]$hpi.100/mydata[date==d.list[i],]$percapita.100,label="Price\nto\nIncome",color=viridis(10)[6])+
# geom_text(aes(y=hpi.100/percapita.100),color=viridis(10)[6])+
theme_minimal()+theme(plot.caption=element_text(hjust=0,size=11))+
labs(subtitle="Index: Jan, 1991=1",y="",x="",caption= mycaption,title="House price ratios")
ggplot(data=mydata,aes(x=date,y=hpi.100/rent.100))+
geom_line(color=viridis(10)[4])+
#geom_line(aes(y=hpi.100/100),color=viridis(10)[5])+
geom_line(aes(y=hpi.100/noshelter.100),color=viridis(10)[2])+
geom_line(aes(y=hpi.100/percapita.100),color=viridis(10)[6])+
# geom_text(color=viridis(10)[4])+
#geom_line(aes(y=hpi.100/100),color=viridis(10)[5])+
annotate("text",x=d.list[i],y=mydata[date==d.list[i],]$hpi.100/mydata[date==d.list[i],]$rent.100,label="Price\nto\nRent",color=viridis(10)[4])+
annotate("text",x=d.list[i],y=mydata[date==d.list[i],]$hpi.100/mydata[date==d.list[i],]$noshelter.100,label="Real\nPrice",color=viridis(10)[2])+
annotate("text",x=d.list[i],y=mydata[date==d.list[i],]$hpi.100/mydata[date==d.list[i],]$percapita.100,label="Price\nto\nIncome",color=viridis(10)[6])+
# geom_text(aes(y=hpi.100/percapita.100),color=viridis(10)[6])+
theme_minimal()+theme(plot.caption=element_text(hjust=0,size=11))+
labs(subtitle="Index: Jan, 1991=1",y="",x="",caption= mycaption,title="House price ratios")
ggplot(data=mydata[date<=d.list[i]],aes(x=date,y=hpi.100/rent.100))+
geom_line(color=viridis(10)[4])+
#geom_line(aes(y=hpi.100/100),color=viridis(10)[5])+
geom_line(aes(y=hpi.100/noshelter.100),color=viridis(10)[2])+
geom_line(aes(y=hpi.100/percapita.100),color=viridis(10)[6])+
# geom_text(color=viridis(10)[4])+
#geom_line(aes(y=hpi.100/100),color=viridis(10)[5])+
annotate("text",x=d.list[i],y=mydata[date==d.list[i],]$hpi.100/mydata[date==d.list[i],]$rent.100,label="Price\nto\nRent",color=viridis(10)[4])+
annotate("text",x=d.list[i],y=mydata[date==d.list[i],]$hpi.100/mydata[date==d.list[i],]$noshelter.100,label="Real\nPrice",color=viridis(10)[2])+
annotate("text",x=d.list[i],y=mydata[date==d.list[i],]$hpi.100/mydata[date==d.list[i],]$percapita.100,label="Price\nto\nIncome",color=viridis(10)[6])+
# geom_text(aes(y=hpi.100/percapita.100),color=viridis(10)[6])+
theme_minimal()+theme(plot.caption=element_text(hjust=0,size=11))+
labs(subtitle="Index: Jan, 1991=1",y="",x="",caption= mycaption,title="House price ratios")
getwd()
setwd('C:/Users/Leonard/Documents/Data Viz/blog/fhfa')
ggplot(data=mydata[date<=d.list[i]],aes(x=date,y=hpi.100/rent.100))+
geom_line(color=viridis(10)[4])+
scale_y_continuous(limits=c(0.8,1.6),breaks=seq(0.8,1.6,.1))+
scale_x_date(limits=c(min(mydata$date),max(mydata$date)+150),date_labels="%Y",
breaks=seq(as.Date("1990-01-01"),as.Date("2020-01-01"),"5 year"))+
geom_line(aes(y=hpi.100/noshelter.100),color=viridis(10)[2])+
geom_line(aes(y=hpi.100/percapita.100),color=viridis(10)[6])+
annotate("text",x=d.list[i],y=mydata[date==d.list[i],]$hpi.100/mydata[date==d.list[i],]$rent.100,label="Price\nto\nRent",color=viridis(10)[4])+
annotate("text",x=d.list[i],y=mydata[date==d.list[i],]$hpi.100/mydata[date==d.list[i],]$noshelter.100,label="Real\nPrice",color=viridis(10)[2])+
annotate("text",x=d.list[i],y=mydata[date==d.list[i],]$hpi.100/mydata[date==d.list[i],]$percapita.100,label="Price\nto\nIncome",color=viridis(10)[6])+
theme_minimal()+theme(plot.caption=element_text(hjust=0,size=11))+
labs(subtitle="House prices relative to other prices, rents, and per capita disposable income",y="Index: Jan, 1991=1",x="",caption= mycaption,title="House price ratios")
ggplot(data=mydata[date<=d.list[i]],aes(x=date,y=hpi.100/rent.100))+
geom_line(color=viridis(10)[4])+
scale_y_continuous(limits=c(0.8,1.6),breaks=seq(0.8,1.6,.1))+
scale_x_date(limits=c(min(mydata$date),max(mydata$date)+150),date_labels="%Y",
breaks=seq(as.Date("1990-01-01"),as.Date("2020-01-01"),"5 year"))+
geom_line(aes(y=hpi.100/noshelter.100),color=viridis(10)[2])+
geom_line(aes(y=hpi.100/percapita.100),color=viridis(10)[6])+
annotate("text",size=6,x=d.list[i],y=mydata[date==d.list[i],]$hpi.100/mydata[date==d.list[i],]$rent.100,label="Price\nto\nRent",color=viridis(10)[4])+
annotate("text",x=d.list[i],y=mydata[date==d.list[i],]$hpi.100/mydata[date==d.list[i],]$noshelter.100,label="Real\nPrice",color=viridis(10)[2])+
annotate("text",x=d.list[i],y=mydata[date==d.list[i],]$hpi.100/mydata[date==d.list[i],]$percapita.100,label="Price\nto\nIncome",color=viridis(10)[6])+
theme_minimal()+theme(plot.caption=element_text(hjust=0,size=11))+
labs(subtitle="House prices relative to other prices, rents, and per capita disposable income",y="Index: Jan, 1991=1",x="",caption= mycaption,title="House price ratios")
ggplot(data=mydata[date<=d.list[i]],aes(x=date,y=hpi.100/rent.100))+
geom_line(color=viridis(10)[4])+
scale_y_continuous(limits=c(0.8,1.6),breaks=seq(0.8,1.6,.1))+
scale_x_date(limits=c(min(mydata$date),max(mydata$date)+150),date_labels="%Y",
breaks=seq(as.Date("1990-01-01"),as.Date("2020-01-01"),"5 year"))+
geom_line(aes(y=hpi.100/noshelter.100),color=viridis(10)[2])+
geom_line(aes(y=hpi.100/percapita.100),color=viridis(10)[6])+
annotate("text",size=3,x=d.list[i],y=mydata[date==d.list[i],]$hpi.100/mydata[date==d.list[i],]$rent.100,label="Price\nto\nRent",color=viridis(10)[4])+
annotate("text",x=d.list[i],y=mydata[date==d.list[i],]$hpi.100/mydata[date==d.list[i],]$noshelter.100,label="Real\nPrice",color=viridis(10)[2])+
annotate("text",x=d.list[i],y=mydata[date==d.list[i],]$hpi.100/mydata[date==d.list[i],]$percapita.100,label="Price\nto\nIncome",color=viridis(10)[6])+
theme_minimal()+theme(plot.caption=element_text(hjust=0,size=11))+
labs(subtitle="House prices relative to other prices, rents, and per capita disposable income",y="Index: Jan, 1991=1",x="",caption= mycaption,title="House price ratios")
oopt = ani.options(interval = 0.05)
saveGIF({for (i in 1:N-1) {
g<-
ggplot(data=mydata[date<=d.list[i]],aes(x=date,y=hpi.100/rent.100))+
geom_line(color=viridis(10)[4])+
scale_y_continuous(limits=c(0.8,1.6),breaks=seq(0.8,1.6,.1))+
scale_x_date(limits=c(min(mydata$date),max(mydata$date)+150),date_labels="%Y",
breaks=seq(as.Date("1990-01-01"),as.Date("2020-01-01"),"5 year"))+
geom_line(aes(y=hpi.100/noshelter.100),color=viridis(10)[2])+
geom_line(aes(y=hpi.100/percapita.100),color=viridis(10)[6])+
annotate("text",size=3,x=d.list[i],y=mydata[date==d.list[i],]$hpi.100/mydata[date==d.list[i],]$rent.100,label="Price\nto\nRent",color=viridis(10)[4])+
annotate("text",size=3,x=d.list[i],y=mydata[date==d.list[i],]$hpi.100/mydata[date==d.list[i],]$noshelter.100,label="Real\nPrice",color=viridis(10)[2])+
annotate("text",siz3=3,x=d.list[i],y=mydata[date==d.list[i],]$hpi.100/mydata[date==d.list[i],]$percapita.100,label="Price\nto\nIncome",color=viridis(10)[6])+
theme_minimal()+theme(plot.caption=element_text(hjust=0,size=11))+
labs(subtitle="House prices relative to other prices, rents, and per capita disposable income",y="Index: Jan, 1991=1",x="",caption= mycaption,title="House price ratios")
print(g)
print(i)
ani.pause()
}
for (i2 in 1:20) {
print(g)
print(i2)
ani.pause()
}
},movie.name="house price ratios vs other prices nov 2016.gif",ani.width = 650, ani.height = 450)
oopt = ani.options(interval = 0.05)
saveGIF({for (i in 1:N-1) {
g<-
ggplot(data=mydata[date<=d.list[i]],aes(x=date,y=hpi.100/rent.100))+
geom_line(color=viridis(10)[4])+
scale_y_continuous(limits=c(0.8,1.6),breaks=seq(0.8,1.6,.1))+
scale_x_date(limits=c(min(mydata$date),max(mydata$date)+150),date_labels="%Y",
breaks=seq(as.Date("1990-01-01"),as.Date("2020-01-01"),"5 year"))+
geom_line(aes(y=hpi.100/noshelter.100),color=viridis(10)[2])+
geom_line(aes(y=hpi.100/percapita.100),color=viridis(10)[6])+
annotate("text",size=3,x=d.list[i],y=mydata[date==d.list[i],]$hpi.100/mydata[date==d.list[i],]$rent.100,label="Price\nto\nRent",color=viridis(10)[4])+
annotate("text",size=3,x=d.list[i],y=mydata[date==d.list[i],]$hpi.100/mydata[date==d.list[i],]$noshelter.100,label="Real\nPrice",color=viridis(10)[2])+
annotate("text",size=3,x=d.list[i],y=mydata[date==d.list[i],]$hpi.100/mydata[date==d.list[i],]$percapita.100,label="Price\nto\nIncome",color=viridis(10)[6])+
theme_minimal()+theme(plot.caption=element_text(hjust=0,size=11))+
labs(subtitle="House prices relative to other prices, rents, and per capita disposable income",y="Index: Jan, 1991=1",x="",caption= mycaption,title="House price ratios")
print(g)
print(i)
ani.pause()
}
for (i2 in 1:20) {
print(g)
print(i2)
ani.pause()
}
},movie.name="house price ratios vs other prices nov 2016.gif",ani.width = 650, ani.height = 450)
mydata[date==d.list[i],]$hpi.100/mydata[date==d.list[i],]$rent.100
mydata[date==d.list[i],]$hpi.100/mydata[date==d.list[i],]$noshelter.100
mydata[date==d.list[i],]$hpi.100/mydata[date==d.list[i],]$percapita.100
mydata[date==d.list[i],]$hpi.100/mydata[date==d.list[i],]$noshelter.100
mydata[date==d.list[i],]$hpi.100/mydata[date==d.list[i],]$rent.100
mydata[date=="1998-01-01",]$hpi.100/mydata[date=="1998-01-01",]$rent.100
i
d.list[i]
i
N
mydata
i<-3098
i<-309
mydata[date==d.list[i],]$hpi.100/mydata[date==d.list[i],]$percapita.100
library(tweenr)
library(ggplot2)
library(scales)
library(viridis)
library(animation)
library(dplyr)
library(readxl)
library(data.table)
library(ggrepel)
library(viridis)
setwd('C:/Users/Leonard/Documents/Data Viz/blog/fhfa')
mydata<-read_excel("fhfa hpi and income2.xlsx",sheet="data")
mydata$date<-as.Date(mydata$date, format="%m/%d/%Y")
library("tidyr")
mydata %>% gather("var","value",-date) %>%data.table() ->mydata2
ind.list<-unique(mydata2$var)[5:8]
mydata2[ , id:= ifelse(
var == "hpi.100", "House Prices",
ifelse(
var == "noshelter.100","Other Prices",
ifelse( var== "percapita.100","Income",
ifelse(var=="rent.100","Rent","other"))))
]
mycaption<- "@lenkiefer Source: House Prices: FHFA purchase-only house price index. Rent: U.S. Bureau of Labor Statistics (BLS) consumer price index rent of primary residence. Other Prices: BLS consumer price index all items less shelter. Income: U.S. Bureau of Economic Analysis per capita disposable personal income (Table 2.6.). All are seasonally adjusted."
mycaption <- paste0(strwrap(mycaption, 120), sep="", collapse="\n")
#rebenchmark data to the year 2000
p2000<-mydata2[date=="2000-01-01",]
p2000 %>% dplyr::rename(value2000=value)->p2000
d.list<-unique(mydata2$date)
N<-length(d.list)
mydata2<-merge(mydata2,p2000[,list(var,value2000)],by="var")
mydata2[,v2:=100*value/value2000]
mydata[date==d.list[i],]$hpi.100/mydata[date==d.list[i],]$percapita.100
N
d.list[i]
i
mydata
mydata<-data.table(mydata)
mydata[date==d.list[i],]$hpi.100/mydata[date==d.list[i],]$percapita.100
mydata[date==d.list[i],]$hpi.100/mydata[date==d.list[i],]$rent.100
mydata[date==d.list[i],]$hpi.100/mydata[date==d.list[i],]$noshelter.100
library(tweenr)
library(ggplot2)
library(scales)
library(viridis)
library(animation)
library(dplyr)
library(readxl)
library(data.table)
library(ggrepel)
library(viridis)
setwd('C:/Users/Leonard/Documents/Data Viz/blog/fhfa')
mydata<-read_excel("fhfa hpi and income2.xlsx",sheet="data")
mydata$date<-as.Date(mydata$date, format="%m/%d/%Y")
library("tidyr")
mydata %>% gather("var","value",-date) %>%data.table() ->mydata2
ind.list<-unique(mydata2$var)[5:8]
mydata2[ , id:= ifelse(
var == "hpi.100", "House Prices",
ifelse(
var == "noshelter.100","Other Prices",
ifelse( var== "percapita.100","Income",
ifelse(var=="rent.100","Rent","other"))))
]
mycaption<- "@lenkiefer Source: House Prices: FHFA purchase-only house price index. Rent: U.S. Bureau of Labor Statistics (BLS) consumer price index rent of primary residence. Other Prices: BLS consumer price index all items less shelter. Income: U.S. Bureau of Economic Analysis per capita disposable personal income (Table 2.6.). All are seasonally adjusted."
mycaption <- paste0(strwrap(mycaption, 120), sep="", collapse="\n")
#rebenchmark data to the year 2000
p2000<-mydata2[date=="2000-01-01",]
p2000 %>% dplyr::rename(value2000=value)->p2000
d.list<-unique(mydata2$date)
N<-length(d.list)
mydata2<-merge(mydata2,p2000[,list(var,value2000)],by="var")
mydata2[,v2:=100*value/value2000]
mydata
mydata<-data.table(mydata)
mycaption2<- "@lenkiefer Source: House Prices: FHFA purchase-only house price index. Rent: U.S. Bureau of Labor Statistics (BLS) consumer price index owner's equivalent rent of primary residence. Other Prices: BLS consumer price index all items less shelter. Income: U.S. Bureau of Economic Analysis per capita disposable personal income (Table 2.6.). All are seasonally adjusted."
mycaption2 <- paste0(strwrap(mycaption, 120), sep="", collapse="\n")
i
ggplot(data=mydata[date<=d.list[i]],aes(x=date,y=hpi.100/rent.100))+
geom_line(color=viridis(10)[4])+
scale_y_continuous(limits=c(0.8,1.6),breaks=seq(0.8,1.6,.1))+
scale_x_date(limits=c(min(mydata$date),max(mydata$date)+150),date_labels="%Y",
breaks=seq(as.Date("1990-01-01"),as.Date("2020-01-01"),"5 year"))+
geom_line(aes(y=hpi.100/noshelter.100),color=viridis(10)[2])+
geom_line(aes(y=hpi.100/percapita.100),color=viridis(10)[6])+
annotate("text",size=3,x=d.list[i],y=mydata[date==d.list[i],]$hpi.100/mydata[date==d.list[i],]$rent.100,label="Price\nto\nRent",color=viridis(10)[4])+
annotate("text",size=3,x=d.list[i],y=mydata[date==d.list[i],]$hpi.100/mydata[date==d.list[i],]$noshelter.100,label="Real\nPrice",color=viridis(10)[2])+
annotate("text",size=3,x=d.list[i],y=mydata[date==d.list[i],]$hpi.100/mydata[date==d.list[i],]$percapita.100,label="Price\nto\nIncome",color=viridis(10)[6])+
theme_minimal()+theme(plot.caption=element_text(hjust=0,size=11))+
labs(subtitle="House prices relative to other prices, rents, and per capita disposable income",
y="Index: Jan, 1991=1",x="",caption= mycaption2,title="House price ratios")
ggplot(data=mydata[date<=d.list[i]],aes(x=date,y=hpi.100/rent.100))+
geom_line(color=viridis(10)[4])+
scale_y_continuous(limits=c(0.8,1.6),breaks=seq(0.8,1.6,.1))+
scale_x_date(limits=c(min(mydata$date),max(mydata$date)+150),date_labels="%Y",
breaks=seq(as.Date("1990-01-01"),as.Date("2020-01-01"),"5 year"))+
geom_line(aes(y=hpi.100/noshelter.100),color=viridis(10)[2])+
geom_line(aes(y=hpi.100/percapita.100),color=viridis(10)[6])+
annotate("text",size=3,x=d.list[i],y=mydata[date==d.list[i],]$hpi.100/mydata[date==d.list[i],]$oer.100,label="Price\nto\nRent",color=viridis(10)[4])+
annotate("text",size=3,x=d.list[i],y=mydata[date==d.list[i],]$hpi.100/mydata[date==d.list[i],]$noshelter.100,label="Real\nPrice",color=viridis(10)[2])+
annotate("text",size=3,x=d.list[i],y=mydata[date==d.list[i],]$hpi.100/mydata[date==d.list[i],]$percapita.100,label="Price\nto\nIncome",color=viridis(10)[6])+
theme_minimal()+theme(plot.caption=element_text(hjust=0,size=11))+
labs(subtitle="House prices relative to other prices, rents, and per capita disposable income",
y="Index: Jan, 1991=1",x="",caption= mycaption2,title="House price ratios")
ggplot(data=mydata[date<=d.list[i]],aes(x=date,y=hpi.100/oer.100))+
geom_line(color=viridis(10)[4])+
scale_y_continuous(limits=c(0.8,1.6),breaks=seq(0.8,1.6,.1))+
scale_x_date(limits=c(min(mydata$date),max(mydata$date)+150),date_labels="%Y",
breaks=seq(as.Date("1990-01-01"),as.Date("2020-01-01"),"5 year"))+
geom_line(aes(y=hpi.100/noshelter.100),color=viridis(10)[2])+
geom_line(aes(y=hpi.100/percapita.100),color=viridis(10)[6])+
annotate("text",size=3,x=d.list[i],y=mydata[date==d.list[i],]$hpi.100/mydata[date==d.list[i],]$oer.100,label="Price\nto\nRent",color=viridis(10)[4])+
annotate("text",size=3,x=d.list[i],y=mydata[date==d.list[i],]$hpi.100/mydata[date==d.list[i],]$noshelter.100,label="Real\nPrice",color=viridis(10)[2])+
annotate("text",size=3,x=d.list[i],y=mydata[date==d.list[i],]$hpi.100/mydata[date==d.list[i],]$percapita.100,label="Price\nto\nIncome",color=viridis(10)[6])+
theme_minimal()+theme(plot.caption=element_text(hjust=0,size=11))+
labs(subtitle="House prices relative to other prices, rents, and per capita disposable income",
y="Index: Jan, 1991=1",x="",caption= mycaption2,title="House price ratios")
mydata[date==d.list[i],]$hpi.100/mydata[date==d.list[i],]$oer.100
mydata[date=="1998-01-01",]$hpi.100/mydata[date=="1998-01-01",]$oer.100
1.19/.97
oopt = ani.options(interval = 0.05)
saveGIF({for (i in 1:N) {
g<-
ggplot(data=mydata[date<=d.list[i]],aes(x=date,y=hpi.100/oer.100))+
geom_line(color=viridis(10)[4])+
scale_y_continuous(limits=c(0.8,1.6),breaks=seq(0.8,1.6,.1))+
scale_x_date(limits=c(min(mydata$date),max(mydata$date)+150),date_labels="%Y",
breaks=seq(as.Date("1990-01-01"),as.Date("2020-01-01"),"5 year"))+
geom_line(aes(y=hpi.100/noshelter.100),color=viridis(10)[2])+
geom_line(aes(y=hpi.100/percapita.100),color=viridis(10)[6])+
annotate("text",size=3,x=d.list[i],y=mydata[date==d.list[i],]$hpi.100/mydata[date==d.list[i],]$oer.100,label="Price\nto\nRent",color=viridis(10)[4])+
annotate("text",size=3,x=d.list[i],y=mydata[date==d.list[i],]$hpi.100/mydata[date==d.list[i],]$noshelter.100,label="Real\nPrice",color=viridis(10)[2])+
annotate("text",size=3,x=d.list[i],y=mydata[date==d.list[i],]$hpi.100/mydata[date==d.list[i],]$percapita.100,label="Price\nto\nIncome",color=viridis(10)[6])+
theme_minimal()+theme(plot.caption=element_text(hjust=0,size=11))+
labs(subtitle="House prices relative to other prices, rents, and per capita disposable income",
y="Index: Jan, 1991=1",x="",caption= mycaption2,title="House price ratios")
print(g)
print(i)
ani.pause()
}
for (i2 in 1:20) {
print(g)
print(i2)
ani.pause()
}
},movie.name="house price ratios vs other prices nov 2016.gif",ani.width = 650, ani.height = 450)
i
mydata
oopt = ani.options(interval = 0.05)
saveGIF({for (i in 1:N-1) {
g<-
ggplot(data=mydata[date<=d.list[i]],aes(x=date,y=hpi.100/oer.100))+
geom_line(color=viridis(10)[4])+
scale_y_continuous(limits=c(0.8,1.6),breaks=seq(0.8,1.6,.1))+
scale_x_date(limits=c(min(mydata$date),max(mydata$date)+150),date_labels="%Y",
breaks=seq(as.Date("1990-01-01"),as.Date("2020-01-01"),"5 year"))+
geom_line(aes(y=hpi.100/noshelter.100),color=viridis(10)[2])+
geom_line(aes(y=hpi.100/percapita.100),color=viridis(10)[6])+
annotate("text",size=3,x=d.list[i],y=mydata[date==d.list[i],]$hpi.100/mydata[date==d.list[i],]$oer.100,label="Price\nto\nRent",color=viridis(10)[4])+
annotate("text",size=3,x=d.list[i],y=mydata[date==d.list[i],]$hpi.100/mydata[date==d.list[i],]$noshelter.100,label="Real\nPrice",color=viridis(10)[2])+
annotate("text",size=3,x=d.list[i],y=mydata[date==d.list[i],]$hpi.100/mydata[date==d.list[i],]$percapita.100,label="Price\nto\nIncome",color=viridis(10)[6])+
theme_minimal()+theme(plot.caption=element_text(hjust=0,size=11))+
labs(subtitle="House prices relative to other prices, rents, and per capita disposable income",
y="Index: Jan, 1991=1",x="",caption= mycaption2,title="House price ratios")
print(g)
print(i)
ani.pause()
}
for (i2 in 1:20) {
print(g)
print(i2)
ani.pause()
}
},movie.name="house price ratios vs other prices nov 2016.gif",ani.width = 650, ani.height = 450)
i
lenght(d.list)
length(d.list)
oopt = ani.options(interval = 0.05)
saveGIF({for (i in 1:(N-1)) {
g<-
ggplot(data=mydata[date<=d.list[i]],aes(x=date,y=hpi.100/oer.100))+
geom_line(color=viridis(10)[4])+
scale_y_continuous(limits=c(0.8,1.6),breaks=seq(0.8,1.6,.1))+
scale_x_date(limits=c(min(mydata$date),max(mydata$date)+150),date_labels="%Y",
breaks=seq(as.Date("1990-01-01"),as.Date("2020-01-01"),"5 year"))+
geom_line(aes(y=hpi.100/noshelter.100),color=viridis(10)[2])+
geom_line(aes(y=hpi.100/percapita.100),color=viridis(10)[6])+
annotate("text",size=3,x=d.list[i],y=mydata[date==d.list[i],]$hpi.100/mydata[date==d.list[i],]$oer.100,label="Price\nto\nRent",color=viridis(10)[4])+
annotate("text",size=3,x=d.list[i],y=mydata[date==d.list[i],]$hpi.100/mydata[date==d.list[i],]$noshelter.100,label="Real\nPrice",color=viridis(10)[2])+
annotate("text",size=3,x=d.list[i],y=mydata[date==d.list[i],]$hpi.100/mydata[date==d.list[i],]$percapita.100,label="Price\nto\nIncome",color=viridis(10)[6])+
theme_minimal()+theme(plot.caption=element_text(hjust=0,size=11))+
labs(subtitle="House prices relative to other prices, rents, and per capita disposable income",
y="Index: Jan, 1991=1",x="",caption= mycaption2,title="House price ratios")
print(g)
print(i)
ani.pause()
}
for (i2 in 1:20) {
print(g)
print(i2)
ani.pause()
}
},movie.name="house price ratios vs other prices nov 2016.gif",ani.width = 650, ani.height = 450)
mycaption2
mycaption2<- "@lenkiefer Source: House Prices: FHFA purchase-only house price index. Rent: U.S. Bureau of Labor Statistics (BLS) consumer price index owner's equivalent rent of primary residence. Other Prices: BLS consumer price index all items less shelter. Income: U.S. Bureau of Economic Analysis per capita disposable personal income (Table 2.6.). All are seasonally adjusted."
mycaption2 <- paste0(strwrap(mycaption2, 120), sep="", collapse="\n")
ggplot(data=mydata[date<=d.list[i]],aes(x=date,y=hpi.100/oer.100))+
geom_line(color=viridis(10)[4])+
scale_y_continuous(limits=c(0.8,1.6),breaks=seq(0.8,1.6,.1))+
#scale_x_date(limits=c(min(mydata$date),max(mydata$date)+150),date_labels="%Y",                 breaks=seq(as.Date("1990-01-01"),as.Date("2020-01-01"),"5 year"))+
geom_line(aes(y=hpi.100/noshelter.100),color=viridis(10)[2])+
geom_line(aes(y=hpi.100/percapita.100),color=viridis(10)[6])+
annotate("text",size=3,x=d.list[i],y=mydata[date==d.list[i],]$hpi.100/mydata[date==d.list[i],]$oer.100,label="Price\nto\nRent",color=viridis(10)[4])+
annotate("text",size=3,x=d.list[i],y=mydata[date==d.list[i],]$hpi.100/mydata[date==d.list[i],]$noshelter.100,label="Real\nPrice",color=viridis(10)[2])+
annotate("text",size=3,x=d.list[i],y=mydata[date==d.list[i],]$hpi.100/mydata[date==d.list[i],]$percapita.100,label="Price\nto\nIncome",color=viridis(10)[6])+
theme_minimal()+theme(plot.caption=element_text(hjust=0,size=11))+
labs(subtitle="House prices relative to other prices, rents, and per capita disposable income",
y="Index: Jan, 1991=1",x="",caption= mycaption2,title="House price ratios")
N
N<-50
oopt = ani.options(interval = 0.05)
saveGIF({for (i in 1:(N-1)) {
g<-
ggplot(data=mydata[date<=d.list[i]],aes(x=date,y=hpi.100/oer.100))+
geom_line(color=viridis(10)[4])+
scale_y_continuous(limits=c(0.8,1.6),breaks=seq(0.8,1.6,.1))+
#scale_x_date(limits=c(min(mydata$date),max(mydata$date)+150),date_labels="%Y",                 breaks=seq(as.Date("1990-01-01"),as.Date("2020-01-01"),"5 year"))+
geom_line(aes(y=hpi.100/noshelter.100),color=viridis(10)[2])+
geom_line(aes(y=hpi.100/percapita.100),color=viridis(10)[6])+
annotate("text",size=3,x=d.list[i],y=mydata[date==d.list[i],]$hpi.100/mydata[date==d.list[i],]$oer.100,label="Price\nto\nRent",color=viridis(10)[4])+
annotate("text",size=3,x=d.list[i],y=mydata[date==d.list[i],]$hpi.100/mydata[date==d.list[i],]$noshelter.100,label="Real\nPrice",color=viridis(10)[2])+
annotate("text",size=3,x=d.list[i],y=mydata[date==d.list[i],]$hpi.100/mydata[date==d.list[i],]$percapita.100,label="Price\nto\nIncome",color=viridis(10)[6])+
theme_minimal()+theme(plot.caption=element_text(hjust=0,size=11))+
labs(subtitle="House prices relative to other prices, rents, and per capita disposable income",
y="Index: Jan, 1991=1",x="",caption= mycaption2,title="House price ratios")
print(g)
print(i)
ani.pause()
}
for (i2 in 1:20) {
print(g)
print(i2)
ani.pause()
}
},movie.name="house price ratios vs other prices nov 2016.gif",ani.width = 650, ani.height = 450)
N
length(d.list)
N<-310
oopt = ani.options(interval = 0.05)
saveGIF({for (i in 1:(N-1)) {
g<-
ggplot(data=mydata[date<=d.list[i]],aes(x=date,y=hpi.100/oer.100))+
geom_line(color=viridis(10)[4])+
scale_y_continuous(limits=c(0.8,1.6),breaks=seq(0.8,1.6,.1))+
#scale_x_date(limits=c(min(mydata$date),max(mydata$date)+150),date_labels="%Y",                 breaks=seq(as.Date("1990-01-01"),as.Date("2020-01-01"),"5 year"))+
geom_line(aes(y=hpi.100/noshelter.100),color=viridis(10)[2])+
geom_line(aes(y=hpi.100/percapita.100),color=viridis(10)[6])+
annotate("text",size=3,x=d.list[i],y=mydata[date==d.list[i],]$hpi.100/mydata[date==d.list[i],]$oer.100,label="Price\nto\nRent",color=viridis(10)[4])+
annotate("text",size=3,x=d.list[i],y=mydata[date==d.list[i],]$hpi.100/mydata[date==d.list[i],]$noshelter.100,label="Real\nPrice",color=viridis(10)[2])+
annotate("text",size=3,x=d.list[i],y=mydata[date==d.list[i],]$hpi.100/mydata[date==d.list[i],]$percapita.100,label="Price\nto\nIncome",color=viridis(10)[6])+
theme_minimal()+theme(plot.caption=element_text(hjust=0,size=11))+
labs(subtitle="House prices relative to other prices, rents, and per capita disposable income",
y="Index: Jan, 1991=1",x="",caption= mycaption2,title="House price ratios")
print(g)
print(i)
ani.pause()
}
for (i2 in 1:20) {
print(g)
print(i2)
ani.pause()
}
},movie.name="house price ratios vs other prices nov 2016.gif",ani.width = 650, ani.height = 450)
KnitPost(site.path="C:/Users/Leonard/Documents/webpage/live/lenkiefer.github.com/", overwriteAll=T, overwriteOne=NULL)
KnitPost(site.path="C:/Users/Leonard/Documents/webpage/live/lenkiefer.github.com/", overwriteAll=T, overwriteOne=NULL)
