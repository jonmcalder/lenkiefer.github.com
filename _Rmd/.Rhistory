labs(title="Household debt balances",subtitle=paste("Data through:",as.character(dlist[i],format="%B-%Y"),"Index, 2003 Q1=100"),x="",y="",caption="@lenkiefer Source: FRBNY Consumer Credit Panel/Equifax")
print(g)
print(i)
ani.pause()
}
for (i2 in 1:10) {
print(g)
print(i2)
ani.pause()
}
#},movie.name="rate_7_29_2016.gif",ani.width = 500, ani.height = 350)
},movie.name="debt balances 2016Q2.gif",ani.width = 500, ani.height = 350)
N<-length(dlist)
oopt = ani.options(interval = 0.15)
saveGIF({for (i in 5:N) {
g<-
ggplot(data=cdata[date<=dlist[i],],aes(x=date,y=rv,color=type,label=type))+geom_line(size=1.2)+theme_minimal()+
geom_text_repel(data=cdata[date==dlist[i],],nudge_x=10,nudge_y=.025)+
scale_y_continuous(breaks=seq(0,550,50))+
coord_cartesian(xlim=c(as.Date("2003-01-01"),as.Date("2017-12-31")), y=c(0,550))+
theme(plot.title=element_text(size=14))+theme(plot.caption=element_text(hjust=0,vjust=1,margin=margin(t=10)))+
theme(plot.margin=unit(c(0.25,0.25,0.25,0.25),"cm"))+
theme(legend.position="none")+
labs(title="Household debt balances",subtitle=paste("Data through:",as.character(dlist[i],format="%B-%Y"),"Index, 2003 Q1=100"),x="",y="",caption="@lenkiefer Source: FRBNY Consumer Credit Panel/Equifax")
print(g)
print(i)
ani.pause()
}
for (i2 in 1:10) {
print(g)
print(i2)
ani.pause()
}
#},movie.name="rate_7_29_2016.gif",ani.width = 500, ani.height = 350)
},movie.name="debt balances 2016Q2.gif",ani.width = 500, ani.height = 350)
oopt = ani.options(interval = 0.15)
saveGIF({for (i in 5:N) {
g<-
ggplot(data=cdata[date<=dlist[i],],aes(x=date,y=rv,color=type,label=type))+geom_line(size=1.2)+theme_minimal()+
geom_text_repel(data=cdata[date==dlist[i],],nudge_x=10,nudge_y=.025)+
scale_y_continuous(breaks=seq(0,550,50))+
coord_cartesian(xlim=c(as.Date("2003-01-01"),as.Date("2017-12-31")), y=c(0,550))+
theme(plot.title=element_text(size=14))+theme(plot.caption=element_text(hjust=0,vjust=1,margin=margin(t=10)))+
theme(plot.margin=unit(c(0.25,0.25,0.25,0.25),"cm"))+
theme(legend.position="none")+
labs(title="Household debt balances",subtitle=paste("Data through:",as.character(dlist[i],format="%B-%Y"),"Index, 2003 Q1=100"),x="",y="",caption="@lenkiefer Source: FRBNY Consumer Credit Panel/Equifax")
print(g)
print(i)
ani.pause()
}
for (i2 in 1:10) {
print(g)
print(i2)
ani.pause()
}
#},movie.name="rate_7_29_2016.gif",ani.width = 500, ani.height = 350)
},movie.name="debt balances 2016Q2.gif",ani.width = 500, ani.height = 550)
ggplot(data=cdata[date<=dlist[i],],aes(x=date,y=rv,color=type,label=type))+geom_line(size=1.2)+theme_minimal()+
geom_text_repel(data=cdata[date==dlist[i],],nudge_x=10,nudge_y=.025)+
scale_y_continuous(breaks=seq(0,550,50))+
coord_cartesian(xlim=c(as.Date("2003-01-01"),as.Date("2017-03-30")), y=c(0,550))+
theme(plot.title=element_text(size=14))+theme(plot.caption=element_text(hjust=0,vjust=1,margin=margin(t=10)))+
theme(plot.margin=unit(c(0.25,0.25,0.25,0.25),"cm"))+
theme(legend.position="none")+
labs(title="Household debt balances",
subtitle="Index, 2003 Q1 = 100",
#subtitle=paste("Data through:",as.character(dlist[i],format="%B-%Y"),"Index, 2003 Q1=100"),
x="",y="",caption="@lenkiefer Source: FRBNY Consumer Credit Panel/Equifax")
oopt = ani.options(interval = 0.15)
saveGIF({for (i in 5:N) {
g<-
ggplot(data=cdata[date<=dlist[i],],aes(x=date,y=rv,color=type,label=type))+geom_line(size=1.2)+theme_minimal()+
geom_text_repel(data=cdata[date==dlist[i],],nudge_x=10,nudge_y=.025)+
scale_y_continuous(breaks=seq(0,550,50))+
coord_cartesian(xlim=c(as.Date("2003-01-01"),as.Date("2017-03-30")), y=c(0,550))+
theme(plot.title=element_text(size=14))+theme(plot.caption=element_text(hjust=0,vjust=1,margin=margin(t=10)))+
theme(plot.margin=unit(c(0.25,0.25,0.25,0.25),"cm"))+
theme(legend.position="none")+
labs(title="Household debt balances",
subtitle="Index (2003 Q1 = 100)",
#subtitle=paste("Data through:",as.character(dlist[i],format="%B-%Y"),"Index, 2003 Q1=100"),
x="",y="",caption="@lenkiefer Source: FRBNY Consumer Credit Panel/Equifax")
print(g)
print(i)
ani.pause()
}
for (i2 in 1:10) {
print(g)
print(i2)
ani.pause()
}
#},movie.name="rate_7_29_2016.gif",ani.width = 500, ani.height = 350)
},movie.name="debt balances 2016Q2.gif",ani.width = 500, ani.height = 550)
KnitPost <- function(site.path='/pathToYourBlog/', overwriteAll=F, overwriteOne=NULL) {
if(!'package:knitr' %in% search()) library('knitr')
## Blog-specific directories.  This will depend on how you organize your blog.
site.path <- site.path # directory of jekyll blog (including trailing slash)
rmd.path <- paste0(site.path, "_Rmd") # directory where your Rmd-files reside (relative to base)
fig.dir <- "img/Rfig/" # directory to save figures
posts.path <- paste0(site.path, "_posts/") # directory for converted markdown files
cache.path <- paste0(site.path, "_cache/") # necessary for plots
render_jekyll(highlight = "pygments")
opts_knit$set(base.url = '/', base.dir = site.path)
opts_chunk$set(fig.path=fig.dir, fig.width=8.5, fig.height=5.25, dev='svg', cache=F,
warning=F, message=F, cache.path=cache.path, tidy=F)
setwd(rmd.path) # setwd to base
# some logic to help us avoid overwriting already existing md files
files.rmd <- data.frame(rmd = list.files(path = rmd.path,
full.names = T,
pattern = "\\.Rmd$",
ignore.case = T,
recursive = F), stringsAsFactors=F)
files.rmd$corresponding.md.file <- paste0(posts.path, "/", basename(gsub(pattern = "\\.Rmd$", replacement = ".md", x = files.rmd$rmd)))
files.rmd$corresponding.md.exists <- file.exists(files.rmd$corresponding.md.file)
## determining which posts to overwrite from parameters overwriteOne & overwriteAll
files.rmd$md.overwriteAll <- overwriteAll
if(is.null(overwriteOne)==F) files.rmd$md.overwriteAll[grep(overwriteOne, files.rmd[,'rmd'], ignore.case=T)] <- T
files.rmd$md.render <- F
for (i in 1:dim(files.rmd)[1]) {
if (files.rmd$corresponding.md.exists[i] == F) {
files.rmd$md.render[i] <- T
}
if ((files.rmd$corresponding.md.exists[i] == T) && (files.rmd$md.overwriteAll[i] == T)) {
files.rmd$md.render[i] <- T
}
}
# For each Rmd file, render markdown (contingent on the flags set above)
for (i in 1:dim(files.rmd)[1]) {
if (files.rmd$md.render[i] == T) {
out.file <- knit(as.character(files.rmd$rmd[i]),
output = as.character(files.rmd$corresponding.md.file[i]),
envir = parent.frame(),
quiet = T)
message(paste0("KnitPost(): ", basename(files.rmd$rmd[i])))
}
}
}
library("knitr")
#KnitPost(site.path="C:/Users/Leonard/Documents/webpage/live/lenkiefer.github.com/", overwriteAll=TRUE, overwriteOne=NULL)
#KnitPost(site.path="C:/Users/Leonard/Documents/webpage/live/lenkiefer.github.com/", overwriteAll=FALSE, overwriteOne=4)
KnitPost(site.path="C:/Users/Leonard/Documents/webpage/live/lenkiefer.github.com/", overwriteAll=T, overwriteOne=NULL)
KnitPost(site.path="C:/Users/Leonard/Documents/webpage/live/lenkiefer.github.com/", overwriteAll=T, overwriteOne=NULL)
KnitPost(site.path="C:/Users/Leonard/Documents/webpage/live/lenkiefer.github.com/", overwriteAll=T, overwriteOne=NULL)
cdata
ggplot(data=cdata[date<=dlist[i],],aes(x=date,y=debt,color=type,label=type))+geom_line(size=1.2)+theme_minimal()+
geom_text_repel(data=cdata[date==dlist[i],],nudge_x=10,nudge_y=.025)+
#scale_y_continuous(breaks=seq(0,550,50))+
#coord_cartesian(xlim=c(as.Date("2003-01-01"),as.Date("2017-03-30")), y=c(0,550))+
theme(plot.title=element_text(size=14))+theme(plot.caption=element_text(hjust=0,vjust=1,margin=margin(t=10)))+
theme(plot.margin=unit(c(0.25,0.25,0.25,0.25),"cm"))+
theme(legend.position="none")+
labs(title="Household debt balances",
subtitle="Index (2003 Q1 = 100)",
#subtitle=paste("Data through:",as.character(dlist[i],format="%B-%Y"),"Index, 2003 Q1=100"),
x="",y="",caption="@lenkiefer Source: FRBNY Consumer Credit Panel/Equifax")
ggplot(data=cdata[date<=dlist[i],],aes(x=date,y=debt,color=type,label=type))+geom_line(size=1.2)+theme_minimal()+
geom_text_repel(data=cdata[date==dlist[i],],nudge_x=10,nudge_y=.025)+facet_wrap(~type,scales="free_y")
theme(plot.title=element_text(size=14))+theme(plot.caption=element_text(hjust=0,vjust=1,margin=margin(t=10)))+
theme(plot.margin=unit(c(0.25,0.25,0.25,0.25),"cm"))+
theme(legend.position="none")+
labs(title="Household debt balances",
subtitle="Index (2003 Q1 = 100)",
#subtitle=paste("Data through:",as.character(dlist[i],format="%B-%Y"),"Index, 2003 Q1=100"),
x="",y="",caption="@lenkiefer Source: FRBNY Consumer Credit Panel/Equifax")
ggplot(data=cdata[date<=dlist[i],],aes(x=date,y=debt,color=type,label=type))+geom_line(size=1.2)+theme_minimal()+
geom_text_repel(data=cdata[date==dlist[i],],nudge_x=10,nudge_y=.025)+facet_wrap(~type,scales="free_y")+
theme(plot.title=element_text(size=14))+theme(plot.caption=element_text(hjust=0,vjust=1,margin=margin(t=10)))+
theme(plot.margin=unit(c(0.25,0.25,0.25,0.25),"cm"))+
theme(legend.position="none")+
labs(title="Household debt balances",
subtitle="Index (2003 Q1 = 100)",
#subtitle=paste("Data through:",as.character(dlist[i],format="%B-%Y"),"Index, 2003 Q1=100"),
x="",y="",caption="@lenkiefer Source: FRBNY Consumer Credit Panel/Equifax")
ggplot(data=cdata[date<=dlist[i] & type !="Total",],aes(x=date,y=debt,color=type,label=type))+geom_line(size=1.2)+theme_minimal()+
geom_text_repel(data=cdata[date==dlist[i],],nudge_x=10,nudge_y=.025)+facet_wrap(~type,scales="free_y")+
theme(plot.title=element_text(size=14))+theme(plot.caption=element_text(hjust=0,vjust=1,margin=margin(t=10)))+
theme(plot.margin=unit(c(0.25,0.25,0.25,0.25),"cm"))+
theme(legend.position="none")+
labs(title="Household debt balances",
subtitle="Index (2003 Q1 = 100)",
#subtitle=paste("Data through:",as.character(dlist[i],format="%B-%Y"),"Index, 2003 Q1=100"),
x="",y="",caption="@lenkiefer Source: FRBNY Consumer Credit Panel/Equifax")
ggplot(data=cdata[date<=dlist[i] & type !="Total",],aes(x=date,y=debt,color=type,label=type))+geom_line(size=1.2)+theme_minimal()+
#  geom_text_repel(data=cdata[date==dlist[i],],nudge_x=10,nudge_y=.025)+
facet_wrap(~type,scales="free_y")+
theme(plot.title=element_text(size=14))+theme(plot.caption=element_text(hjust=0,vjust=1,margin=margin(t=10)))+
theme(plot.margin=unit(c(0.25,0.25,0.25,0.25),"cm"))+
theme(legend.position="none")+
labs(title="Household debt balances",
subtitle="Index (2003 Q1 = 100)",
#subtitle=paste("Data through:",as.character(dlist[i],format="%B-%Y"),"Index, 2003 Q1=100"),
x="",y="",caption="@lenkiefer Source: FRBNY Consumer Credit Panel/Equifax")
ggplot(data=cdata[date<=dlist[i] & type !="Total",],aes(x=date,y=debt,color=type,label=type))+geom_line(size=1.2)+theme_minimal()+
#  geom_text_repel(data=cdata[date==dlist[i],],nudge_x=10,nudge_y=.025)+
facet_wrap(~type,scales="free_y")+
theme(plot.title=element_text(size=14))+theme(plot.caption=element_text(hjust=0,vjust=1,margin=margin(t=10)))+
theme(plot.margin=unit(c(0.25,0.25,0.25,0.25),"cm"))+
theme(legend.position="none")+
labs(title="Household debt balances",
subtitle="Trillions of Dollars",
#subtitle=paste("Data through:",as.character(dlist[i],format="%B-%Y"),"Index, 2003 Q1=100"),
x="",y="",caption="@lenkiefer Source: FRBNY Consumer Credit Panel/Equifax")
ggplot(data=cdata[date<=dlist[i] & type !="Total",],aes(x=date,y=debt,color=type,label=type))+geom_line(size=1.2)+theme_minimal()+
#  geom_text_repel(data=cdata[date==dlist[i],],nudge_x=10,nudge_y=.025)+
#facet_wrap(~type,scales="free_y")+
theme(plot.title=element_text(size=14))+theme(plot.caption=element_text(hjust=0,vjust=1,margin=margin(t=10)))+
theme(plot.margin=unit(c(0.25,0.25,0.25,0.25),"cm"))+
theme(legend.position="none")+
labs(title="Household debt balances",
subtitle="Trillions of Dollars",
#subtitle=paste("Data through:",as.character(dlist[i],format="%B-%Y"),"Index, 2003 Q1=100"),
x="",y="",caption="@lenkiefer Source: FRBNY Consumer Credit Panel/Equifax")
ggplot(data=cdata[date<=dlist[i] & type !="Total",],aes(x=date,y=debt,color=type,label=type))+geom_line(size=1.2)+theme_minimal()+
geom_text_repel(data=cdata[date==dlist[i] & type != "Total",],nudge_x=10,nudge_y=.025)+
#facet_wrap(~type,scales="free_y")+
theme(plot.title=element_text(size=14))+theme(plot.caption=element_text(hjust=0,vjust=1,margin=margin(t=10)))+
theme(plot.margin=unit(c(0.25,0.25,0.25,0.25),"cm"))+
theme(legend.position="none")+
labs(title="Household debt balances",
subtitle="Trillions of Dollars",
#subtitle=paste("Data through:",as.character(dlist[i],format="%B-%Y"),"Index, 2003 Q1=100"),
x="",y="",caption="@lenkiefer Source: FRBNY Consumer Credit Panel/Equifax")
ggplot(data=cdata[date<=dlist[i] & type !="Total" & type !="Mortgage",],aes(x=date,y=debt,color=type,label=type))+geom_line(size=1.2)+theme_minimal()+
geom_text_repel(data=cdata[date==dlist[i] & type != "Total"& type !="Mortgage",],nudge_x=10,nudge_y=.025)+
#facet_wrap(~type,scales="free_y")+
theme(plot.title=element_text(size=14))+theme(plot.caption=element_text(hjust=0,vjust=1,margin=margin(t=10)))+
theme(plot.margin=unit(c(0.25,0.25,0.25,0.25),"cm"))+
theme(legend.position="none")+
labs(title="Household debt balances",
subtitle="Trillions of Dollars",
#subtitle=paste("Data through:",as.character(dlist[i],format="%B-%Y"),"Index, 2003 Q1=100"),
x="",y="",caption="@lenkiefer Source: FRBNY Consumer Credit Panel/Equifax")
ggplot(data=cdata[date<=dlist[i] & type !="Total" & type !="Mortgage",],aes(x=date,y=debt,color=type,label=type))+geom_line(size=1.2)+theme_minimal()+
geom_text_repel(data=cdata[date==dlist[i] & type != "Total"& type !="Mortgage",],nudge_x=10,nudge_y=.025)+
#facet_wrap(~type,scales="free_y")+
theme(plot.title=element_text(size=14))+theme(plot.caption=element_text(hjust=0,vjust=1,margin=margin(t=10)))+
theme(plot.margin=unit(c(0.25,0.25,0.25,0.25),"cm"))+
coord_cartesian(xlim=c(as.Date("2003-01-01"),as.Date("2017-03-30")))+
theme(legend.position="none")+
labs(title="Household debt balances",
subtitle="Trillions of Dollars",
#subtitle=paste("Data through:",as.character(dlist[i],format="%B-%Y"),"Index, 2003 Q1=100"),
x="",y="",caption="@lenkiefer Source: FRBNY Consumer Credit Panel/Equifax")
KnitPost(site.path="C:/Users/Leonard/Documents/webpage/live/lenkiefer.github.com/", overwriteAll=T, overwriteOne=NULL)
KnitPost(site.path="C:/Users/Leonard/Documents/webpage/live/lenkiefer.github.com/", overwriteAll=T, overwriteOne=NULL)
KnitPost(site.path="C:/Users/Leonard/Documents/webpage/live/lenkiefer.github.com/", overwriteAll=T, overwriteOne=NULL)
KnitPost(site.path="C:/Users/Leonard/Documents/webpage/live/lenkiefer.github.com/", overwriteAll=T, overwriteOne=NULL)
KnitPost(site.path="C:/Users/Leonard/Documents/webpage/live/lenkiefer.github.com/", overwriteAll=T, overwriteOne=NULL)
KnitPost(site.path="C:/Users/Leonard/Documents/webpage/live/lenkiefer.github.com/", overwriteAll=T, overwriteOne=NULL)
KnitPost(site.path="C:/Users/Leonard/Documents/webpage/live/lenkiefer.github.com/", overwriteAll=T, overwriteOne=NULL)
KnitPost(site.path="C:/Users/Leonard/Documents/webpage/live/lenkiefer.github.com/", overwriteAll=T, overwriteOne=NULL)
KnitPost(site.path="C:/Users/Leonard/Documents/webpage/live/lenkiefer.github.com/", overwriteAll=T, overwriteOne=NULL)
KnitPost(site.path="C:/Users/Leonard/Documents/webpage/live/lenkiefer.github.com/", overwriteAll=T, overwriteOne=NULL)
getwd()
oopt = ani.options(interval = 0.15)
saveGIF({for (i in 5:N) {
g<-
ggplot(data=cdata[date<=dlist[i],],aes(x=date,y=rv,color=type,label=type))+geom_line(size=1.2)+theme_minimal()+
geom_text_repel(data=cdata[date==dlist[i],],nudge_x=10,nudge_y=.025)+
scale_y_continuous(breaks=seq(0,550,50))+
coord_cartesian(xlim=c(as.Date("2003-01-01"),as.Date("2017-03-30")), y=c(0,550))+
theme(plot.title=element_text(size=14))+theme(plot.caption=element_text(hjust=0,vjust=1,margin=margin(t=10)))+
theme(plot.margin=unit(c(0.25,0.25,0.25,0.25),"cm"))+
theme(legend.position="none")+
labs(title="Household debt balances",
subtitle="Index (2003 Q1 = 100)",
#subtitle=paste("Data through:",as.character(dlist[i],format="%B-%Y"),"Index, 2003 Q1=100"),
x="",y="",caption="@lenkiefer Source: FRBNY Consumer Credit Panel/Equifax")
print(g)
ani.pause()
}
for (i2 in 1:10) {
print(g)
ani.pause()
}
},movie.name="debt balances 2016Q2.gif",ani.width = 740, ani.height = 750)
KnitPost(site.path="C:/Users/Leonard/Documents/webpage/live/lenkiefer.github.com/", overwriteAll=T, overwriteOne=NULL)
KnitPost(site.path="C:/Users/Leonard/Documents/webpage/live/lenkiefer.github.com/", overwriteAll=T, overwriteOne=NULL)
KnitPost(site.path="C:/Users/Leonard/Documents/webpage/live/lenkiefer.github.com/", overwriteAll=T, overwriteOne=NULL)
KnitPost(site.path="C:/Users/Leonard/Documents/webpage/live/lenkiefer.github.com/", overwriteAll=T, overwriteOne=NULL)
KnitPost(site.path="C:/Users/Leonard/Documents/webpage/live/lenkiefer.github.com/", overwriteAll=T, overwriteOne=NULL)
KnitPost(site.path="C:/Users/Leonard/Documents/webpage/live/lenkiefer.github.com/", overwriteAll=T, overwriteOne=NULL)
KnitPost(site.path="C:/Users/Leonard/Documents/webpage/live/lenkiefer.github.com/", overwriteAll=T, overwriteOne=NULL)
KnitPost(site.path="C:/Users/Leonard/Documents/webpage/live/lenkiefer.github.com/", overwriteAll=T, overwriteOne=NULL)
oopt = ani.options(interval = 0.15)
saveGIF({for (i in 5:N) {
g<-
ggplot(data=data[date<=dlist[i],],aes(x=date,y=rv,color=type,label=type))+geom_line(size=1.2)+theme_minimal()+
geom_text_repel(data=data[date==dlist[i],],nudge_x=10,nudge_y=.025)+
scale_y_continuous(breaks=seq(0,550,50))+
coord_cartesian(xlim=c(as.Date("2003-01-01"),as.Date("2017-03-30")), y=c(0,550))+
theme(plot.title=element_text(size=14))+theme(plot.caption=element_text(hjust=0,vjust=1,margin=margin(t=10)))+
theme(plot.margin=unit(c(0.25,0.25,0.25,0.25),"cm"))+
theme(legend.position="none")+
labs(title="Household debt balances",
subtitle="Index (2003 Q1 = 100)",
x="",y="",caption="@lenkiefer Source: FRBNY Consumer Credit Panel/Equifax")
print(g)
ani.pause()
}
#pause at end
for (i2 in 1:10) {
print(g)
ani.pause()
}
},movie.name="debt balances 2016Q2.gif",ani.width = 740, ani.height = 550)
dlist
i
N
data
data <- fread("data/debt2016q2.txt")
data$date<-as.Date(data$date, format="%m/%d/%Y")
data
oopt = ani.options(interval = 0.15)
saveGIF({for (i in 5:N) {
g<-
ggplot(data=data[date<=dlist[i],],aes(x=date,y=rv,color=type,label=type))+geom_line(size=1.2)+theme_minimal()+
geom_text_repel(data=data[date==dlist[i],],nudge_x=10,nudge_y=.025)+
scale_y_continuous(breaks=seq(0,550,50))+
coord_cartesian(xlim=c(as.Date("2003-01-01"),as.Date("2017-03-30")), y=c(0,550))+
theme(plot.title=element_text(size=14))+theme(plot.caption=element_text(hjust=0,vjust=1,margin=margin(t=10)))+
theme(plot.margin=unit(c(0.25,0.25,0.25,0.25),"cm"))+
theme(legend.position="none")+
labs(title="Household debt balances",
subtitle="Index (2003 Q1 = 100)",
x="",y="",caption="@lenkiefer Source: FRBNY Consumer Credit Panel/Equifax")
print(g)
ani.pause()
}
#pause at end
for (i2 in 1:10) {
print(g)
ani.pause()
}
},movie.name="debt balances 2016Q2.gif",ani.width = 740, ani.height = 550)
KnitPost(site.path="C:/Users/Leonard/Documents/webpage/live/lenkiefer.github.com/", overwriteAll=T, overwriteOne=NULL)
KnitPost(site.path="C:/Users/Leonard/Documents/webpage/live/lenkiefer.github.com/", overwriteAll=T, overwriteOne=NULL)
sdata <- fread("data/pcdebt2016q2.txt")
sdata$date<-as.Date(sdata$date, format="%m/%d/%Y")
sdata
ggplot(data=sdata[date<=dslist[Ns] ,],aes(x=date,y=debt,color=type,label=type))+geom_line(size=1.2)+theme_minimal()+
geom_text_repel(data=sdata[date==dslist[N] ,],nudge_x=10,nudge_y=.025)
sdata <- fread("data/pcdebt2016q2.txt")
sdata$date<-as.Date(sdata$date, format="%m/%d/%Y")
dslist<-unique(cdata$date)  #unique set of dates
Ns<-length(dlist)  #number of dates
ggplot(data=sdata[date<=dslist[Ns] ,],aes(x=date,y=debt,color=state,label=state))+geom_line(size=1.2)+theme_minimal()+
geom_text_repel(data=sdata[date==dslist[N] ,],nudge_x=10,nudge_y=.025)
sdata
ggplot(data=sdata[date<=dslist[Ns] ,],aes(x=date,y=pcdebt,color=state,label=state))+geom_line(size=1.2)+theme_minimal()+
geom_text_repel(data=sdata[date==dslist[N] ,],nudge_x=10,nudge_y=.025)
ggplot(data=sdata[date<=dslist[Ns] ,],aes(x=date,y=pcdebt,color=state,label=state))+geom_line(size=1.2)+theme_minimal()+
geom_text_repel(data=sdata[date==dslist[N] ,],nudge_x=10,nudge_y=.025)  + facet_wrap(~state)
ggplot(data=sdata[date<=dslist[Ns] ,],aes(x=date,y=pcdebt,color=state,label=state))+geom_line(size=1.2)+theme_minimal()+
geom_text_repel(data=sdata[date==dslist[N] ,],nudge_x=10,nudge_y=.025)  + facet_wrap(~state)  +
theme(plot.title=element_text(size=14))+theme(plot.caption=element_text(hjust=0,vjust=1,margin=margin(t=10)))+
theme(plot.margin=unit(c(0.25,0.25,0.25,0.25),"cm"))+
coord_cartesian(xlim=c(as.Date("2003-01-01"),as.Date("2017-03-30")))+
theme(legend.position="none")+
labs(title="Per captia household debt",
subtitle="Thousands of dollars, (Based on the population with a credit report) ",
#subtitle=paste("Data through:",as.character(dlist[i],format="%B-%Y"),"Index, 2003 Q1=100"),
x="",y="",caption="@lenkiefer Source: FRBNY Consumer Credit Panel/Equifax")
ggplot(data=sdata[date<=dslist[Ns] ,],aes(x=date,y=pcdebt,color=state,label=state))+geom_line(size=1.2)+theme_minimal()+
facet_wrap(~state)  +
theme(plot.title=element_text(size=14))+theme(plot.caption=element_text(hjust=0,vjust=1,margin=margin(t=10)))+
theme(plot.margin=unit(c(0.25,0.25,0.25,0.25),"cm"))+
coord_cartesian(xlim=c(as.Date("2003-01-01"),as.Date("2017-03-30")))+
theme(legend.position="none")+
labs(title="Per captia household debt",
subtitle="Thousands of dollars, (Based on the population with a credit report) ",
#subtitle=paste("Data through:",as.character(dlist[i],format="%B-%Y"),"Index, 2003 Q1=100"),
x="",y="",caption="@lenkiefer Source: FRBNY Consumer Credit Panel/Equifax")
ggplot(data=sdata[date<=dslist[Ns] ,],aes(x=date,y=pcdebt,color=state,label=state))+geom_line(size=1.2)+theme_minimal()+
facet_wrap(~state,ncol=3)  +
theme(plot.title=element_text(size=14))+theme(plot.caption=element_text(hjust=0,vjust=1,margin=margin(t=10)))+
theme(plot.margin=unit(c(0.25,0.25,0.25,0.25),"cm"))+
coord_cartesian(xlim=c(as.Date("2003-01-01"),as.Date("2017-03-30")))+
theme(legend.position="none")+
labs(title="Per captia household debt",
subtitle="Thousands of dollars, (Based on the population with a credit report) ",
#subtitle=paste("Data through:",as.character(dlist[i],format="%B-%Y"),"Index, 2003 Q1=100"),
x="",y="",caption="@lenkiefer Source: FRBNY Consumer Credit Panel/Equifax")
ggplot(data=sdata[date<=dslist[Ns] ,],aes(x=date,y=pcdebt,color=state,label=state))+geom_line(size=1.2)+theme_minimal()+
facet_wrap(~state,ncol=3)  + scale_x_continuous(limits=c(0,90))+
theme(plot.title=element_text(size=14))+theme(plot.caption=element_text(hjust=0,vjust=1,margin=margin(t=10)))+
theme(plot.margin=unit(c(0.25,0.25,0.25,0.25),"cm"))+
coord_cartesian(xlim=c(as.Date("2003-01-01"),as.Date("2017-03-30")))+
theme(legend.position="none")+
labs(title="Per captia household debt",
subtitle="Thousands of dollars, (Based on the population with a credit report) ",
#subtitle=paste("Data through:",as.character(dlist[i],format="%B-%Y"),"Index, 2003 Q1=100"),
x="",y="",caption="@lenkiefer Source: FRBNY Consumer Credit Panel/Equifax")
ggplot(data=sdata[date<=dslist[Ns] ,],aes(x=date,y=pcdebt,color=state,label=state))+geom_line(size=1.2)+theme_minimal()+
facet_wrap(~state,ncol=3)  + scale_y_continuous(limits=c(0,90))+
theme(plot.title=element_text(size=14))+theme(plot.caption=element_text(hjust=0,vjust=1,margin=margin(t=10)))+
theme(plot.margin=unit(c(0.25,0.25,0.25,0.25),"cm"))+
coord_cartesian(xlim=c(as.Date("2003-01-01"),as.Date("2017-03-30")))+
theme(legend.position="none")+
labs(title="Per captia household debt",
subtitle="Thousands of dollars, (Based on the population with a credit report) ",
#subtitle=paste("Data through:",as.character(dlist[i],format="%B-%Y"),"Index, 2003 Q1=100"),
x="",y="",caption="@lenkiefer Source: FRBNY Consumer Credit Panel/Equifax")
KnitPost(site.path="C:/Users/Leonard/Documents/webpage/live/lenkiefer.github.com/", overwriteAll=T, overwriteOne=NULL)
ggplot(data=sdata[date<=dslist[Ns] ,],aes(x=date,y=pcdebt,color=state,label=state))+geom_line(size=1.2)+theme_minimal()+
geom_text_repel(data=sdata[date==dslist[N],],nudge_x=10,nudge_y=.025)+
# facet_wrap(~state,ncol=3)  +
scale_y_continuous(limits=c(0,90))+
theme(plot.title=element_text(size=14))+theme(plot.caption=element_text(hjust=0,vjust=1,margin=margin(t=10)))+
theme(plot.margin=unit(c(0.25,0.25,0.25,0.25),"cm"))+
coord_cartesian(xlim=c(as.Date("2003-01-01"),as.Date("2017-03-30")))+
theme(legend.position="none")+
labs(title="Per captia household debt",
subtitle="Thousands of dollars, (Based on the population with a credit report) ",
#subtitle=paste("Data through:",as.character(dlist[i],format="%B-%Y"),"Index, 2003 Q1=100"),
x="",y="",caption="@lenkiefer Source: FRBNY Consumer Credit Panel/Equifax")
ggplot(data=sdata[date<=dslist[Ns] ,],aes(x=date,y=pcdebt,color=state,label=state))+geom_line(size=1.2)+theme_minimal()+
#geom_text_repel(data=sdata[date==dslist[N],],nudge_x=10,nudge_y=.025)+
facet_wrap(~state,ncol=3)  +
scale_y_continuous(limits=c(0,90))+
theme(plot.title=element_text(size=14))+theme(plot.caption=element_text(hjust=0,vjust=1,margin=margin(t=10)))+
theme(plot.margin=unit(c(0.25,0.25,0.25,0.25),"cm"))+
coord_cartesian(xlim=c(as.Date("2003-01-01"),as.Date("2017-03-30")))+
theme(legend.position="none")+
labs(title="Per captia household debt",
subtitle="Thousands of dollars, (Based on the population with a credit report) ",
#subtitle=paste("Data through:",as.character(dlist[i],format="%B-%Y"),"Index, 2003 Q1=100"),
x="",y="",caption="@lenkiefer Source: FRBNY Consumer Credit Panel/Equifax")
ggplot(data=sdata[date<=dslist[Ns] ,],aes(x=date,y=pcdebt,color=state,label=state))+geom_line(size=1.2)+theme_minimal()+
#geom_text_repel(data=sdata[date==dslist[N],],nudge_x=10,nudge_y=.025)+
facet_wrap(~state,ncol=3)  +
scale_y_log10(limits=c(20,90))+
theme(plot.title=element_text(size=14))+theme(plot.caption=element_text(hjust=0,vjust=1,margin=margin(t=10)))+
theme(plot.margin=unit(c(0.25,0.25,0.25,0.25),"cm"))+
coord_cartesian(xlim=c(as.Date("2003-01-01"),as.Date("2017-03-30")))+
theme(legend.position="none")+
labs(title="Per captia household debt",
subtitle="Thousands of dollars, (Based on the population with a credit report) ",
#subtitle=paste("Data through:",as.character(dlist[i],format="%B-%Y"),"Index, 2003 Q1=100"),
x="",y="",caption="@lenkiefer Source: FRBNY Consumer Credit Panel/Equifax")
ggplot(data=sdata[date<=dslist[Ns] ,],aes(x=date,y=pcdebt,color=state,label=state))+geom_line(size=1.2)+theme_minimal()+
#geom_text_repel(data=sdata[date==dslist[N],],nudge_x=10,nudge_y=.025)+
facet_wrap(~state,ncol=3)  +
scale_y_log10(limits=c(20,90),breaks=seq(20,90,10))+
theme(plot.title=element_text(size=14))+theme(plot.caption=element_text(hjust=0,vjust=1,margin=margin(t=10)))+
theme(plot.margin=unit(c(0.25,0.25,0.25,0.25),"cm"))+
coord_cartesian(xlim=c(as.Date("2003-01-01"),as.Date("2017-03-30")))+
theme(legend.position="none")+
labs(title="Per captia household debt",
subtitle="Thousands of dollars, (Based on the population with a credit report) ",
#subtitle=paste("Data through:",as.character(dlist[i],format="%B-%Y"),"Index, 2003 Q1=100"),
x="",y="",caption="@lenkiefer Source: FRBNY Consumer Credit Panel/Equifax")
ggplot(data=sdata[date<=dslist[Ns] ,],aes(x=date,y=pcdebt,color=state,label=state))+geom_line(size=1.2)+theme_minimal()+
#geom_text_repel(data=sdata[date==dslist[N],],nudge_x=10,nudge_y=.025)+
facet_wrap(~state,ncol=3)  +
scale_y_log10(limits=c(20,90),breaks=seq(25,90,10))+
theme(plot.title=element_text(size=14))+theme(plot.caption=element_text(hjust=0,vjust=1,margin=margin(t=10)))+
theme(plot.margin=unit(c(0.25,0.25,0.25,0.25),"cm"))+
coord_cartesian(xlim=c(as.Date("2003-01-01"),as.Date("2017-03-30")))+
theme(legend.position="none")+
labs(title="Per captia household debt",
subtitle="Thousands of dollars, (Based on the population with a credit report) ",
#subtitle=paste("Data through:",as.character(dlist[i],format="%B-%Y"),"Index, 2003 Q1=100"),
x="",y="",caption="@lenkiefer Source: FRBNY Consumer Credit Panel/Equifax")
ggplot(data=sdata[date<=dslist[Ns] ,],aes(x=date,y=pcdebt,color=state,label=state))+geom_line(size=1.2)+theme_minimal()+
#geom_text_repel(data=sdata[date==dslist[N],],nudge_x=10,nudge_y=.025)+
facet_wrap(~state,ncol=3)  +
scale_y_log10(limits=c(20,90),breaks=seq(25,90,10))+
theme(plot.title=element_text(size=14))+theme(plot.caption=element_text(hjust=0,vjust=1,margin=margin(t=10)))+
theme(plot.margin=unit(c(0.25,0.25,0.25,0.25),"cm"))+
coord_cartesian(xlim=c(as.Date("2003-01-01"),as.Date("2017-03-30")))+
theme(legend.position="none")+
labs(title="Per captia household debt",
subtitle="Thousands of dollars, (Based on the population with a credit report) ",
#subtitle=paste("Data through:",as.character(dlist[i],format="%B-%Y"),"Index, 2003 Q1=100"),
x="",y="per capita debt (Ths $, log scale)",caption="@lenkiefer Source: FRBNY Consumer Credit Panel/Equifax")
ggplot(data=sdata[date<=dslist[Ns] ,],aes(x=date,y=pcdebt,color=state,label=state))+geom_line(size=1.2)+theme_minimal()+
#geom_text_repel(data=sdata[date==dslist[N],],nudge_x=10,nudge_y=.025)+
facet_wrap(~state,ncol=3)  +
scale_y_log10(limits=c(20,90),breaks=seq(25,90,15))+
theme(plot.title=element_text(size=14))+theme(plot.caption=element_text(hjust=0,vjust=1,margin=margin(t=10)))+
theme(plot.margin=unit(c(0.25,0.25,0.25,0.25),"cm"))+
coord_cartesian(xlim=c(as.Date("2003-01-01"),as.Date("2017-03-30")))+
theme(legend.position="none")+
labs(title="Per captia household debt",
subtitle="Thousands of dollars, (Based on the population with a credit report) ",
#subtitle=paste("Data through:",as.character(dlist[i],format="%B-%Y"),"Index, 2003 Q1=100"),
x="",y="per capita debt (Ths $, log scale)",caption="@lenkiefer Source: FRBNY Consumer Credit Panel/Equifax")
ggplot(data=sdata[date<=dslist[Ns] ,],aes(x=date,y=pcdebt,color=state,label=round(pcdebt,0)))+geom_line(size=1.2)+theme_minimal()+
geom_text_repel(data=sdata[date==dslist[N],],nudge_x=10,nudge_y=.025)+
facet_wrap(~state,ncol=3)  +
scale_y_log10(limits=c(20,90),breaks=seq(25,90,15))+
theme(plot.title=element_text(size=14))+theme(plot.caption=element_text(hjust=0,vjust=1,margin=margin(t=10)))+
theme(plot.margin=unit(c(0.25,0.25,0.25,0.25),"cm"))+
coord_cartesian(xlim=c(as.Date("2003-01-01"),as.Date("2017-03-30")))+
theme(legend.position="none")+
labs(title="Per captia household debt",
subtitle="Thousands of dollars, (Based on the population with a credit report) ",
#subtitle=paste("Data through:",as.character(dlist[i],format="%B-%Y"),"Index, 2003 Q1=100"),
x="",y="per capita debt (Ths $, log scale)",caption="@lenkiefer Source: FRBNY Consumer Credit Panel/Equifax")
KnitPost(site.path="C:/Users/Leonard/Documents/webpage/live/lenkiefer.github.com/", overwriteAll=T, overwriteOne=NULL)
KnitPost(site.path="C:/Users/Leonard/Documents/webpage/live/lenkiefer.github.com/", overwriteAll=T, overwriteOne=NULL)
KnitPost(site.path="C:/Users/Leonard/Documents/webpage/live/lenkiefer.github.com/", overwriteAll=T, overwriteOne=NULL)
KnitPost(site.path="C:/Users/Leonard/Documents/webpage/live/lenkiefer.github.com/", overwriteAll=T, overwriteOne=NULL)
KnitPost(site.path="C:/Users/Leonard/Documents/webpage/live/lenkiefer.github.com/", overwriteAll=T, overwriteOne=NULL)
KnitPost(site.path="C:/Users/Leonard/Documents/webpage/live/lenkiefer.github.com/", overwriteAll=T, overwriteOne=NULL)
KnitPost(site.path="C:/Users/Leonard/Documents/webpage/live/lenkiefer.github.com/", overwriteAll=T, overwriteOne=NULL)
KnitPost(site.path="C:/Users/Leonard/Documents/webpage/live/lenkiefer.github.com/", overwriteAll=T, overwriteOne=NULL)
KnitPost(site.path="C:/Users/Leonard/Documents/webpage/live/lenkiefer.github.com/", overwriteAll=T, overwriteOne=NULL)
KnitPost(site.path="C:/Users/Leonard/Documents/webpage/live/lenkiefer.github.com/", overwriteAll=T, overwriteOne=NULL)
KnitPost(site.path="C:/Users/Leonard/Documents/webpage/live/lenkiefer.github.com/", overwriteAll=T, overwriteOne=NULL)
KnitPost(site.path="C:/Users/Leonard/Documents/webpage/live/lenkiefer.github.com/", overwriteAll=T, overwriteOne=NULL)
