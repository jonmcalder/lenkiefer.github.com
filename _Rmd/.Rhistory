htmlTable(df)
htmlTable::htmlTable(df)
df$year<-substr(df$X__1,1,4)
df$month<-substr(df$X__1,7,7)
df$date<-as.Date(ISOdate(df$year,df$month,1))
df<-select(df,-year,-month)
df
df$year<-substr(df$X__1,1,4)
df$month<-substr(df$X__1,7,7)
df$date<-as.Date(ISOdate(df$year,df$month,1))
# Now we don't need year, month or X__1 any more, let's drop them
df<-select(df,-year,-month,-X__1)
names(df)
df$year<-substr(df$X__1,1,4)
# path to data
path <-"data/hp1604.xlsx"
###########################################################################
#  We'll omitt this step, hard coding instead
#  xl.list<-path %>% excel_sheets()   #get a list of sheet names
###########################################################################
df <- c("HPI","RHPI","PDI","RPDI") %>%   #iterate over four sheets
set_names() %>%
# Now for something magical!
map_df(~ read_excel(path = path, sheet = .x), .id = "sheet")
# print a table using the htmlTable library, round numeric to 0 digits for readability
# Note we won't round in analysis)
htmlTable::htmlTable(rbind(head(df %>%
map_if(is_numeric,round,0) %>%
data.frame() %>% as.tbl())))
df$year<-substr(df$X__1,1,4)
df$month<-substr(df$X__1,7,7)
df$date<-as.Date(ISOdate(df$year,df$month,1))
# Now we don't need year, month or X__1 any more, let's drop them
# we also don't need X__2 which corresponds to a blank column so let's drop it
df<-select(df,-year,-month,-X__1,-X__2)
str(df)
df2<-df %>% gather(country, value, 2:26)
df2
df2<-df %>% gather(country, value, 2:25)
df2
KnitPost(site.path="C:/Users/Leonard/Documents/webpage/live/lenkiefer.github.com/", overwriteAll=T, overwriteOne=NULL)
ggplot(data=filter(df3,year(date)>2005),aes(x=date,y=rhpi))+
geom_line(color="red")+
geom_line(color="blue",linetype=2,aes(y=rpdi))+
facet_wrap(~country)
names(df3)
ggplot(data=filter(df3,year(date)>2005),aes(x=date,y=HPI))+
geom_line(color="red")+
geom_line(color="blue",linetype=2,aes(y=DPI))+
facet_wrap(~country)
ggplot(data=filter(df3,year(date)>2005),aes(x=date,y=HPI))+
geom_line(color="red")+
geom_line(color="blue",linetype=2,aes(y=PDI))+
facet_wrap(~country)
ggplot(data=filter(df3,year(date)>2005),
aes(x=date,y=hpi,color=country,label=country))+
geom_line(size=1.1)+
scale_x_date(breaks=seq(dlist[121],dlist[166]+years(1),"2 year"),
date_labels="%y",limits=c(dlist[121],dlist[166]+years(1)))+
facet_wrap(~country)+
theme_minimal()+ geom_hline(yintercept=100,linetype=2)+
scale_y_log10(breaks=seq(75,200,25),limits=c(60,225))+ theme_fivethirtyeight()+
theme(legend.position="none",plot.caption=element_text(hjust=0,size=7),plot.subtitle=element_text(face="italic"),
axis.text=element_text(size=7.5))+
labs(x="",y="",title="Comparing house prices",
caption="\n@lenkiefer Source: Dallas Federal Reserve International House Price Database: http://www.dallasfed.org/institute/houseprice/",
subtitle="Seasonally adjusted index (2005=100, log scale)")
ggplot(data=filter(df3,year(date)>2005),
aes(x=date,y=hpi,color=country,label=country))+
geom_line(size=1.1)+
scale_x_date(date_breaks="2 year",date_labels="%y")+
facet_wrap(~country)+
theme_minimal()+ geom_hline(yintercept=100,linetype=2)+
scale_y_log10(breaks=seq(75,200,25),limits=c(60,225))+ theme_fivethirtyeight()+
theme(legend.position="none",plot.caption=element_text(hjust=0,size=7),plot.subtitle=element_text(face="italic"),
axis.text=element_text(size=7.5))+
labs(x="",y="",title="Comparing house prices",
caption="\n@lenkiefer Source: Dallas Federal Reserve International House Price Database: http://www.dallasfed.org/institute/houseprice/",
subtitle="Seasonally adjusted index (2005=100, log scale)")
library(ggthemes)
ggplot(data=filter(df3,year(date)>2005),
aes(x=date,y=hpi,color=country,label=country))+
geom_line(size=1.1)+
scale_x_date(date_breaks="2 year",date_labels="%y")+
facet_wrap(~country)+
theme_minimal()+ geom_hline(yintercept=100,linetype=2)+
scale_y_log10(breaks=seq(75,200,25),limits=c(60,225))+ theme_fivethirtyeight()+
theme(legend.position="none",plot.caption=element_text(hjust=0,size=7),plot.subtitle=element_text(face="italic"),
axis.text=element_text(size=7.5))+
labs(x="",y="",title="Comparing house prices",
caption="\n@lenkiefer Source: Dallas Federal Reserve International House Price Database: http://www.dallasfed.org/institute/houseprice/",
subtitle="Seasonally adjusted index (2005=100, log scale)")
ggplot(data=filter(df3,year(date)>2005),
aes(x=date,y=HPI,color=country,label=country))+
geom_line(size=1.1)+
scale_x_date(date_breaks="2 year",date_labels="%y")+
facet_wrap(~country)+
theme_minimal()+ geom_hline(yintercept=100,linetype=2)+
scale_y_log10(breaks=seq(75,200,25),limits=c(60,225))+
theme_fivethirtyeight()+
theme(legend.position="none",plot.caption=element_text(hjust=0,size=7),plot.subtitle=element_text(face="italic"),
axis.text=element_text(size=7.5))+
labs(x="",y="",title="Comparing house prices",
caption="\n@lenkiefer Source: Dallas Federal Reserve International House Price Database: http://www.dallasfed.org/institute/houseprice/",
subtitle="Seasonally adjusted index (2005=100, log scale)")
?library
library(ggthemes,quietly=T,warn.conflicts=F)
ggplot(data=filter(df3,year(date)>2005),
aes(x=date,y=HPI,color=country,label=country))+
geom_line(size=1.1)+
scale_x_date(date_breaks="2 year",date_labels="%y")+
facet_wrap(~country)+
theme_minimal()+ geom_hline(yintercept=100,linetype=2)+
scale_y_log10(breaks=seq(75,200,25),limits=c(60,225))+
theme_fivethirtyeight()+
theme(legend.position="none",plot.caption=element_text(hjust=0,size=7),plot.subtitle=element_text(face="italic"),
axis.text=element_text(size=7.5))+
labs(x="",y="",title="Comparing house prices",
caption="\n@lenkiefer Source: Dallas Federal Reserve International House Price Database: http://www.dallasfed.org/institute/houseprice/",
subtitle="Seasonally adjusted index (2005=100, log scale)")
KnitPost(site.path="C:/Users/Leonard/Documents/webpage/live/lenkiefer.github.com/", overwriteAll=T, overwriteOne=NULL)
KnitPost(site.path="C:/Users/Leonard/Documents/webpage/live/lenkiefer.github.com/", overwriteAll=T, overwriteOne=NULL)
KnitPost(site.path="C:/Users/Leonard/Documents/webpage/live/lenkiefer.github.com/", overwriteAll=T, overwriteOne=NULL)
library(ggthemes,quietly=T,warn.conflicts=F)
mycaption<-"Mack, A., and E. Martínez-García. 2011. 'A Cross-Country Quarterly Database of Real House Prices: A Methodological Note.' Globalization and Monetary Policy Institute Working Paper No. 99, Federal Reserve Bank of Dallas."
mycaption<-str_wrap(mycaption,width=90)
mycap1<-"@lenkiefer Source: Dallas Federal Reserve International House Price Database  http://www.dallasfed.org/institute/houseprice/"
ggplot(data=filter(df3,year(date)>2005),
aes(x=date,y=HPI,color=country,label=country))+
geom_line(size=1.1)+
scale_x_date(date_breaks="2 year",date_labels="%y")+
facet_wrap(~country)+
theme_minimal()+ geom_hline(yintercept=100,linetype=2)+
scale_y_log10(breaks=seq(75,200,25),limits=c(60,225))+
theme_fivethirtyeight()+
theme(legend.position="none",plot.caption=element_text(hjust=0,size=7),plot.subtitle=element_text(face="italic"),
axis.text=element_text(size=7.5))+
labs(x="",y="",title="Comparing house prices",
caption=paste0(mycap1,"\n",mycaption),
subtitle="Seasonally adjusted index (2005=100, log scale)")
names(df2)
ggplot(data=df2,aes(x=date,y=value))+geom_line()+facet_wrap(sheet~value)
ggplot(data=df2,aes(x=date,y=value))+geom_line()+facet_wrap(sheet~country)
ggplot(data=df2,aes(x=date,y=value))+geom_line()+facet_wrap(sheet~country)ggplot(data=filter(df2,year(date)>2004 & country=="US",
aes(x=date,y=value))+geom_line()+facet_wrap(sheet~country)
ggplot(data=filter(df2,year(date)>2004 & country=="US",
aes(x=date,y=value))+geom_line()+facet_wrap(sheet~country)
)
ggplot(data=filter(df2,year(date)>2004 & country=="US"),
aes(x=date,y=value))+geom_line()+facet_wrap(sheet~country)
head(df2)
ggplot(data=filter(df2,year(date)>2004 & country=="US"),
aes(x=date,y=value))+geom_line()+facet_wrap(country~sheet)
ggplot(data=filter(df2,year(date)>2004 & country=="US"),
aes(x=date,y=value))+geom_path()+facet_wrap(country~sheet)
KnitPost(site.path="C:/Users/Leonard/Documents/webpage/live/lenkiefer.github.com/", overwriteAll=T, overwriteOne=NULL)
KnitPost(site.path="C:/Users/Leonard/Documents/webpage/live/lenkiefer.github.com/", overwriteAll=T, overwriteOne=NULL)
summary(df3)
summary(filter(df3,year(date)>2004))
KnitPost(site.path="C:/Users/Leonard/Documents/webpage/live/lenkiefer.github.com/", overwriteAll=T, overwriteOne=NULL)
KnitPost(site.path="C:/Users/Leonard/Documents/webpage/live/lenkiefer.github.com/", overwriteAll=T, overwriteOne=NULL)
KnitPost(site.path="C:/Users/Leonard/Documents/webpage/live/lenkiefer.github.com/", overwriteAll=T, overwriteOne=NULL)
KnitPost(site.path="C:/Users/Leonard/Documents/webpage/live/lenkiefer.github.com/", overwriteAll=T, overwriteOne=NULL)
KnitPost(site.path="C:/Users/Leonard/Documents/webpage/live/lenkiefer.github.com/", overwriteAll=T, overwriteOne=NULL)
KnitPost(site.path="C:/Users/Leonard/Documents/webpage/live/lenkiefer.github.com/", overwriteAll=T, overwriteOne=NULL)
KnitPost(site.path="C:/Users/Leonard/Documents/webpage/live/lenkiefer.github.com/", overwriteAll=T, overwriteOne=NULL)
summary(filter(df,year(date)>2004))
summary(filter(df3,year(date)>2004))
KnitPost(site.path="C:/Users/Leonard/Documents/webpage/live/lenkiefer.github.com/", overwriteAll=T, overwriteOne=NULL)
KnitPost(site.path="C:/Users/Leonard/Documents/webpage/live/lenkiefer.github.com/", overwriteAll=T, overwriteOne=NULL)
ggplot(data=filter(df3,year(date)>2004),
aes(x=date,y=RHPI,color=country,label=country))+
geom_line(size=1.1,color=fivethirtyeight_pal()(2)[1])+
geom_line(size=1.1,color=fivethirtyeight_pal()(2)[2],aes(y=RDPI))+
scale_x_date(date_breaks="2 year",date_labels="%y")+
facet_wrap(~country)+
theme_minimal()+ geom_hline(yintercept=100,linetype=2)+
scale_y_log10(breaks=seq(50,200,25),limits=c(50,225))+
theme_fivethirtyeight()+
theme(legend.position="none",plot.caption=element_text(hjust=0,size=7),plot.subtitle=element_text(face="italic"),
axis.text=element_text(size=7.5))+
labs(x="",y="",title="Comparing real (inflation-adjusted) house prices",
caption=paste0(mycap1,"\n",mycaption),
subtitle="Seasonally adjusted index (2005=100, log scale)")
ggplot(data=filter(df3,year(date)>2004),
aes(x=date,y=RHPI,color=country,label=country))+
geom_line(size=1.1,color=fivethirtyeight_pal()(2)[1])+
geom_line(size=1.1,color=fivethirtyeight_pal()(2)[2],aes(y=RPDI))+
scale_x_date(date_breaks="2 year",date_labels="%y")+
facet_wrap(~country)+
theme_minimal()+ geom_hline(yintercept=100,linetype=2)+
scale_y_log10(breaks=seq(50,200,25),limits=c(50,225))+
theme_fivethirtyeight()+
theme(legend.position="none",plot.caption=element_text(hjust=0,size=7),plot.subtitle=element_text(face="italic"),
axis.text=element_text(size=7.5))+
labs(x="",y="",title="Comparing real (inflation-adjusted) house prices",
caption=paste0(mycap1,"\n",mycaption),
subtitle="Seasonally adjusted index (2005=100, log scale)")
ggplot(data=filter(df3,year(date)>2004),
aes(x=date,y=RHPI,color=country,label=country))+
geom_line(size=1.1,aes(color="House Prices"))+
geom_line(size=1.1,aes(y=RPDI,color="Income"),linetype=2)+
scale_color_fivethirtyeight()+
scale_x_date(date_breaks="2 year",date_labels="%y")+
facet_wrap(~country)+
theme_minimal()+ geom_hline(yintercept=100,linetype=2)+
scale_y_log10(breaks=seq(50,200,25),limits=c(50,225))+
theme_fivethirtyeight()+
theme(legend.position="top",plot.caption=element_text(hjust=0,size=7),plot.subtitle=element_text(face="italic"),
axis.text=element_text(size=7.5))+
labs(x="",y="",title="Comparing real (inflation-adjusted) house prices",
caption=paste0(mycap1,"\n",mycaption),
subtitle="Seasonally adjusted index (2005=100, log scale)")
ggplot(data=filter(df3,year(date)>2004),
aes(x=date,y=RHPI,color=country,label=country))+
geom_line(size=1.1,aes(color="House Prices"))+
geom_line(size=1.1,aes(y=RPDI,color="Income"),linetype=2)+
scale_color_fivethirtyeight()+
scale_x_date(date_breaks="2 year",date_labels="%y")+
facet_wrap(~country)+
theme_minimal()+ geom_hline(yintercept=100,linetype=2)+
scale_y_log10(breaks=seq(50,200,25),limits=c(50,225))+
theme_fivethirtyeight()+
theme(legend.position="top",plot.caption=element_text(hjust=0,size=7),plot.subtitle=element_text(face="italic"),
axis.text=element_text(size=7.5))+
labs(x="",y="",title="Comparing real house prices to disposable income",
caption=paste0(mycap1,"\n",mycaption),
subtitle="Seasonally adjusted inflation adjusted index (2005=100, log scale)")
ggplot(data=filter(df3,year(date)>2004),
aes(x=date,y=HPI,color=country,label=country))+
geom_line(size=1.1,aes(color="House Prices"))+
geom_line(size=1.1,aes(y=PDI,color="Income"),linetype=2)+
scale_color_fivethirtyeight()+
scale_x_date(date_breaks="2 year",date_labels="%y")+
facet_wrap(~country)+
theme_minimal()+ geom_hline(yintercept=100,linetype=2)+
scale_y_log10(breaks=seq(50,200,25),limits=c(50,225))+
theme_fivethirtyeight()+
theme(legend.position="top",plot.caption=element_text(hjust=0,size=7),plot.subtitle=element_text(face="italic"),
axis.text=element_text(size=7.5))+
labs(x="",y="",title="Comparing nominal house prices to disposable income",
caption=paste0(mycap1,"\n",mycaption),
subtitle="Seasonally adjusted index (2005=100, log scale)")
ggplot(data=filter(df3,year(date)>2004 & country %in% c("Canada","US")),
aes(x=date,y=HPI,color=country,label=country))+
geom_line(size=1.1,aes(color="House Prices"))+
geom_line(size=1.1,aes(y=PDI,color="Income"),linetype=2)+
scale_color_fivethirtyeight()+
scale_x_date(date_breaks="2 year",date_labels="%y")+
facet_wrap(~country)+
theme_minimal()+ geom_hline(yintercept=100,linetype=2)+
scale_y_log10(breaks=seq(50,200,25),limits=c(50,225))+
theme_fivethirtyeight()+
theme(legend.position="top",plot.caption=element_text(hjust=0,size=7),plot.subtitle=element_text(face="italic"),
axis.text=element_text(size=7.5))+
labs(x="",y="",title="Comparing nominal house prices to disposable income",
caption=paste0(mycap1,"\n",mycaption),
subtitle="Seasonally adjusted index (2005=100, log scale)")
unique(df3$date)
path <-"data/hp1604.xlsx"
###########################################################################
#  We'll omitt this step, hard coding instead
#  xl.list<-path %>% excel_sheets()   #get a list of sheet names
###########################################################################
df <- c("HPI","RHPI","PDI","RPDI") %>%   #iterate over four sheets
set_names() %>%
# Now for something magical!
map_df(~ read_excel(path = path, sheet = .x), .id = "sheet")
df$year<-substr(df$X__1,1,4)
df$month<-substr(df$X__1,7,7)
df$date<-as.Date(ISOdate(df$year,df$month*3,1))
# Now we don't need year, month or X__1 any more, let's drop them
# we also don't need X__2 which corresponds to a blank column so let's drop it
df<-select(df,-year,-month,-X__1,-X__2)
str(df)
unique(df$date)
df
path <-"data/hp1604.xlsx"
###########################################################################
#  We'll omitt this step, hard coding instead
#  xl.list<-path %>% excel_sheets()   #get a list of sheet names
###########################################################################
df <- c("HPI","RHPI","PDI","RPDI") %>%   #iterate over four sheets
set_names() %>%
# Now for something magical!
map_df(~ read_excel(path = path, sheet = .x), .id = "sheet")
df$year<-substr(df$X__1,1,4)
df$month<-substr(df$X__1,7,7)
df$date<-as.Date(ISOdate(df$year,df$month*3,1))
df$date<-as.Date(ISOdate(df$year,as.numeric(df$month)*3,1))
df
unique(df$date)
df$year<-substr(df$X__1,1,4)
df$month<-substr(df$X__1,7,7)
df$date<-as.Date(ISOdate(df$year,as.numeric(df$month)*3,1))
# Now we don't need year, month or X__1 any more, let's drop them
# we also don't need X__2 which corresponds to a blank column so let's drop it
df<-select(df,-year,-month,-X__1,-X__2)
str(df)
df2<-df %>% gather(country, value, 2:25) # I happen to know data is in colums 2:25
# same business for printing
htmlTable::htmlTable(head(df2 %>% map_if(is_numeric,round,0) %>% data.frame() %>% as.tbl()))
df3<-df2 %>% spread(sheet,value)
# same business for printing
htmlTable::htmlTable(head(df3 %>% map_if(is_numeric,round,0) %>% data.frame() %>% as.tbl()))
#create a caption for attribution to source
mycaption<-"Mack, A., and E. Mart?nez-Garcia. 2011. 'A Cross-Country Quarterly Database of Real House Prices: A Methodological Note.' Globalization and Monetary Policy Institute Working Paper No. 99, Federal Reserve Bank of Dallas."
mycaption<-str_wrap(mycaption,width=90) #wrap the caption
mycap1<-"@lenkiefer Source: Dallas Federal Reserve International House Price Database  http://www.dallasfed.org/institute/houseprice/"  #caption part 2
#######################################################################
### Plot nominal house prices ###
#######################################################################
ggplot(data=filter(df3,year(date)>2004),
aes(x=date,y=HPI,color=country,label=country))+
geom_line(size=1.1)+
scale_x_date(date_breaks="2 year",date_labels="%y")+
facet_wrap(~country)+
theme_minimal()+ geom_hline(yintercept=100,linetype=2)+
scale_y_log10(breaks=seq(50,200,25),limits=c(50,225))+
theme_fivethirtyeight()+
theme(legend.position="none",plot.caption=element_text(hjust=0,size=7),
plot.subtitle=element_text(face="italic"),
axis.text=element_text(size=7.5))+
labs(x="",y="",title="Comparing house prices",
caption=paste0(mycap1,"\n",mycaption),
subtitle="Seasonally adjusted index (2005=100, log scale)")
ggplot(data=filter(df3,year(date)>2004 & country %in% c("Canada","US")),
aes(x=date,y=HPI,color=country,label=country))+
geom_line(size=1.1,aes(color="House Prices"))+
geom_line(size=1.1,aes(y=PDI,color="Income"),linetype=2)+
scale_color_fivethirtyeight()+
scale_x_date(date_breaks="2 year",date_labels="%y")+
facet_wrap(~country)+
theme_minimal()+ geom_hline(yintercept=100,linetype=2)+
scale_y_log10(breaks=seq(50,200,25),limits=c(50,225))+
theme_fivethirtyeight()+
theme(legend.position="top",plot.caption=element_text(hjust=0,size=7),plot.subtitle=element_text(face="italic"),
axis.text=element_text(size=7.5))+
labs(x="",y="",title="Comparing nominal house prices to disposable income",
caption=paste0(mycap1,"\n",mycaption),
subtitle="Seasonally adjusted index (2005=100, log scale)")
df3
pct <- function(x) {x/lag(x,4)}
df3 %>% group_by(country) %>% mutate_each(funs(pct), c(HPI, PDI, RHPI,RPDI))
df3
df3 %>% group_by(country) %>% mutate_each(funs(pct), c(HPI, PDI, RHPI,RPDI))
df3 %>% group_by(country) %>% mutate_each(funs(pct), c(HPI, PDI, RHPI,RPDI)) -> df4
df4
tail(df4)
View(df4)
ggplot(data=filter(df4,year(date)>1999 & country %in% c("Canada","US")),
aes(x=date,y=HPI,color=country,label=country))+
geom_line(size=1.1,aes(color="House Prices"))+
geom_line(size=1.1,aes(y=PDI,color="Income"),linetype=2)+
scale_color_fivethirtyeight()+
scale_x_date(date_breaks="2 year",date_labels="%y")+
facet_wrap(~country)+
theme_minimal()+ geom_hline(yintercept=100,linetype=2)+
#scale_y_log10(breaks=seq(50,200,25),limits=c(50,225))+
theme_fivethirtyeight()+
theme(legend.position="top",plot.caption=element_text(hjust=0,size=7),plot.subtitle=element_text(face="italic"),
axis.text=element_text(size=7.5))+
labs(x="",y="",title="Comparing real house price and real disposable income growth",
caption=paste0(mycap1,"\n",mycaption),
subtitle="Four quarter percent change in seasonally adjusted index (2005=100, log scale)")
ggplot(data=filter(df4,year(date)>1999 & country %in% c("Canada","US")),
aes(x=date,y=HPI,color=country,label=country))+
geom_line(size=1.1,aes(color="House Prices"))+
geom_line(size=1.1,aes(y=PDI,color="Income"),linetype=2)+
scale_color_fivethirtyeight()+
scale_x_date(date_breaks="2 year",date_labels="%y")+
facet_wrap(~country)+
theme_minimal()+
#scale_y_log10(breaks=seq(50,200,25),limits=c(50,225))+
theme_fivethirtyeight()+
theme(legend.position="top",plot.caption=element_text(hjust=0,size=7),
plot.subtitle=element_text(face="italic"),
axis.text=element_text(size=7.5))+
labs(x="",y="",title="Comparing real house price and real disposable income growth",
caption=paste0(mycap1,"\n",mycaption),
subtitle="Four quarter percent change in seasonally adjusted index (2005=100, log scale)")
View(filter(df4,year(date)>1999 & country %in% c("Canada","US")))
pct <- function(x) {(x/lag(x,4))-1}
# usually do this with data.table(), but can with dplyr
# Thanks Stackoverflow!  http://stackoverflow.com/questions/31352685/how-can-i-calculate-the-percentage-change-within-a-group-for-multiple-columns-in
df3 %>% group_by(country) %>%
mutate_each(funs(pct), c(HPI, PDI, RHPI,RPDI)) ->df4
View(filter(df4,year(date)>1999 & country %in% c("Canada","US")))
ggplot(data=filter(df4,year(date)>1999 & country %in% c("Canada","US")),
aes(x=date,y=HPI,color=country,label=country))+
geom_line(size=1.1,aes(color="House Prices"))+
geom_line(size=1.1,aes(y=PDI,color="Income"),linetype=2)+
scale_color_fivethirtyeight()+
scale_x_date(date_breaks="2 year",date_labels="%y")+
facet_wrap(~country)+
theme_minimal()+
scale_y_continuous(label=scales::percent)+  #need scales library for % formatting
theme_fivethirtyeight()+
theme(legend.position="top",plot.caption=element_text(hjust=0,size=7),
plot.subtitle=element_text(face="italic"),
axis.text=element_text(size=7.5))+
labs(x="",y="",title="Comparing real house price and real disposable income growth",
caption=paste0(mycap1,"\n",mycaption),
subtitle="Four quarter percent change in seasonally adjusted index (2005=100, log scale)")
ggplot(data=filter(df4,year(date)>1999 & country %in% c("Canada","US")),
aes(x=date,y=HPI,color=country,label=country))+
geom_line(size=1.1,aes(color="House Prices"))+
geom_line(size=1.1,aes(y=PDI,color="Income"),linetype=2)+
scale_color_fivethirtyeight(name="4-qtr % change in   ")+
scale_x_date(date_breaks="2 year",date_labels="%y")+
facet_wrap(~country)+
theme_minimal()+
scale_y_continuous(label=scales::percent)+  #need scales library for % formatting
theme_fivethirtyeight()+
theme(legend.position="top",plot.caption=element_text(hjust=0,size=7),
plot.subtitle=element_text(face="italic"),
axis.text=element_text(size=7.5))+
labs(x="",y="",title="Comparing real house price and real disposable income growth",
caption=paste0(mycap1,"\n",mycaption),
subtitle="Four quarter percent change in seasonally adjusted index (2005=100, log scale)")
ggplot(data=filter(df4,year(date)>1989 & country %in% c("Canada","US")),
aes(x=date,y=HPI,color=country,label=country))+
geom_line(size=1.1,aes(color="House Prices"))+
geom_line(size=1.1,aes(y=PDI,color="Income"),linetype=2)+
scale_color_fivethirtyeight(name="4-qtr % change in   ")+
scale_x_date(date_breaks="2 year",date_labels="%y")+
facet_wrap(~country)+
theme_minimal()+
scale_y_continuous(label=scales::percent)+  #need scales library for % formatting
theme_fivethirtyeight()+
theme(legend.position="top",plot.caption=element_text(hjust=0,size=7),
plot.subtitle=element_text(face="italic"),
axis.text=element_text(size=7.5))+
labs(x="",y="",title="Comparing real house price and real disposable income growth",
caption=paste0(mycap1,"\n",mycaption),
subtitle="Four quarter percent change in seasonally adjusted index (2005=100, log scale)")
ggplot(data=filter(df4,year(date)>1989 & country %in% c("Canada","US")),
aes(x=date,y=HPI,color=country,label=country))+
geom_line(size=1.1,aes(color="House Prices"))+
geom_line(size=1.1,aes(y=PDI,color="Income"),linetype=2)+
scale_color_fivethirtyeight(name="4-qtr % change in   ")+
scale_x_date(date_breaks="2 year",date_labels="%y")+
facet_wrap(~country)+
theme_minimal()+
scale_y_continuous(label=scales::percent,  #need scales library for % formatting
breaks=seq(-.1,.15,.05))+
theme_fivethirtyeight()+
theme(legend.position="top",plot.caption=element_text(hjust=0,size=7),
plot.subtitle=element_text(face="italic"),
axis.text=element_text(size=7.5))+
labs(x="",y="",title="Comparing real house price and real disposable income growth",
caption=paste0(mycap1,"\n",mycaption),
subtitle="Four quarter percent change in seasonally adjusted index (2005=100, log scale)")
KnitPost(site.path="C:/Users/Leonard/Documents/webpage/live/lenkiefer.github.com/", overwriteAll=T, overwriteOne=NULL)
KnitPost(site.path="C:/Users/Leonard/Documents/webpage/live/lenkiefer.github.com/", overwriteAll=T, overwriteOne=NULL)
KnitPost(site.path="C:/Users/Leonard/Documents/webpage/live/lenkiefer.github.com/", overwriteAll=T, overwriteOne=NULL)
KnitPost(site.path="C:/Users/Leonard/Documents/webpage/live/lenkiefer.github.com/", overwriteAll=T, overwriteOne=NULL)
KnitPost(site.path="C:/Users/Leonard/Documents/webpage/live/lenkiefer.github.com/", overwriteAll=T, overwriteOne=NULL)
KnitPost(site.path="C:/Users/Leonard/Documents/webpage/live/lenkiefer.github.com/", overwriteAll=T, overwriteOne=NULL)
KnitPost(site.path="C:/Users/Leonard/Documents/webpage/live/lenkiefer.github.com/", overwriteAll=T, overwriteOne=NULL)
KnitPost(site.path="C:/Users/Leonard/Documents/webpage/live/lenkiefer.github.com/", overwriteAll=T, overwriteOne=NULL)
KnitPost(site.path="C:/Users/Leonard/Documents/webpage/live/lenkiefer.github.com/", overwriteAll=T, overwriteOne=NULL)
ggplot(data=filter(df4,year(date)>1989 & country %in% c("Canada","US")),
aes(x=date,y=HPI,color=country,label=country))+
geom_line(size=1.1,aes(color="House Prices"))+
geom_line(size=1.1,aes(y=PDI,color="Income"),linetype=2)+
scale_color_fivethirtyeight(name="4-qtr % change in   ")+
scale_x_date(date_breaks="2 year",date_labels="%y")+
facet_wrap(~country)+
theme_minimal()+
scale_y_continuous(label=scales::percent,  #need scales library for % formatting
breaks=seq(-.1,.15,.05))+
theme_fivethirtyeight()+
theme(legend.position="top",plot.caption=element_text(hjust=0,size=7),
plot.subtitle=element_text(face="italic"),
axis.text=element_text(size=7.5))+
labs(x="",y="",title="Real house price and real disposable income growth",
caption=paste0(mycap1,"\n",mycaption),
subtitle="Four quarter percent change in seasonally adjusted index (2005=100, log scale)")
mycaption<-"Mack, A., and E. Martínez-García. 2011. 'A Cross-Country Quarterly Database of Real House Prices: A Methodological Note.' Globalization and Monetary Policy Institute Working Paper No. 99, Federal Reserve Bank of Dallas."
mycaption<-str_wrap(mycaption,width=90) #wrap the caption
mycap1<-"@lenkiefer Source: Dallas Federal Reserve International House Price Database  http://www.dallasfed.org/institute/houseprice/"  #caption part 2
ggplot(data=filter(df4,year(date)>1989 & country %in% c("Canada","US")),
aes(x=date,y=HPI,color=country,label=country))+
geom_line(size=1.1,aes(color="House Prices"))+
geom_line(size=1.1,aes(y=PDI,color="Income"),linetype=2)+
scale_color_fivethirtyeight(name="4-qtr % change in   ")+
scale_x_date(date_breaks="2 year",date_labels="%y")+
facet_wrap(~country)+
theme_minimal()+
scale_y_continuous(label=scales::percent,  #need scales library for % formatting
breaks=seq(-.1,.15,.05))+
theme_fivethirtyeight()+
theme(legend.position="top",plot.caption=element_text(hjust=0,size=7),
plot.subtitle=element_text(face="italic"),
axis.text=element_text(size=7.5))+
labs(x="",y="",title="Real house price and real disposable income growth",
caption=paste0(mycap1,"\n",mycaption),
subtitle="Four quarter percent change in seasonally adjusted index (2005=100, log scale)")
KnitPost(site.path="C:/Users/Leonard/Documents/webpage/live/lenkiefer.github.com/", overwriteAll=T, overwriteOne=NULL)
filter(df3,country=="Canda")
filter(df4,country=="Canada")
tail(filter(df4,country=="Canada"))
KnitPost(site.path="C:/Users/Leonard/Documents/webpage/live/lenkiefer.github.com/", overwriteAll=T, overwriteOne=NULL)
KnitPost(site.path="C:/Users/Leonard/Documents/webpage/live/lenkiefer.github.com/", overwriteAll=T, overwriteOne=NULL)
KnitPost(site.path="C:/Users/Leonard/Documents/webpage/live/lenkiefer.github.com/", overwriteAll=T, overwriteOne=NULL)
KnitPost(site.path="C:/Users/Leonard/Documents/webpage/live/lenkiefer.github.com/", overwriteAll=T, overwriteOne=NULL)
KnitPost(site.path="C:/Users/Leonard/Documents/webpage/live/lenkiefer.github.com/", overwriteAll=T, overwriteOne=NULL)
KnitPost(site.path="C:/Users/Leonard/Documents/webpage/live/lenkiefer.github.com/", overwriteAll=T, overwriteOne=NULL)
KnitPost(site.path="C:/Users/Leonard/Documents/webpage/live/lenkiefer.github.com/", overwriteAll=T, overwriteOne=NULL)
KnitPost(site.path="C:/Users/Leonard/Documents/webpage/live/lenkiefer.github.com/", overwriteAll=T, overwriteOne=NULL)
KnitPost(site.path="C:/Users/Leonard/Documents/webpage/live/lenkiefer.github.com/", overwriteAll=T, overwriteOne=NULL)
